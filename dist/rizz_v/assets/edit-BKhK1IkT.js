import{h as ue,r as u,w as ne,_ as ie,l as M,m as a,k as re,q as f,t as l,L as ce,v as pe,Q as _e,R as ve,J as i,x as me,N as fe,y as d,E as ge,a4 as be,B as A,G as Z,F as z,a9 as ke,D as O,a5 as xe,H as B,a6 as Ve,a7 as ye,a8 as Ce,M as Ne}from"./index-D8mrUL2h.js";import{_ as Ue}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Cx4oJ_hT.js";import{H as T}from"./http-client-9jyrWv7H.js";import{S as c}from"./sweetalert2-DId3skXs.js";import{U as he}from"./products-Bm01FGai.js";import"./logo-sm-CPlBPHhB.js";const Ee=d("label",{for:"name-product",class:"col-form-label text-lg-end"},"Nombre del Producto: ",-1),Se=d("label",{for:"sku-product",class:"col-form-label text-lg-end"},"Sku: ",-1),Pe=d("label",{for:"categorie-product",class:"col-form-label text-lg-end"},"Categoria: ",-1),Ie=d("option",{value:""},"Selec. Categoria",-1),Fe=["value"],$e=d("label",{for:"price-final-product",class:"col-form-label text-lg-end"},"Precio Cliente Final: ",-1),we=d("label",{for:"price-empresa-product",class:"col-form-label text-lg-end"},"Precio Cliente Empresa: ",-1),De=d("label",{for:"description-product",class:"col-form-label text-lg-end"},"DescripciÃ³n: ",-1),Ae=d("label",{for:"is-discount-product",class:"col-form-label text-lg-end"},"Descuento: ",-1),Be={class:"d-flex"},Re=d("label",{for:"discount-amount-product",class:"col-form-label text-lg-end"},"Porcentaje: ",-1),Le=d("label",{for:"disponiblidad-product",class:"col-form-label text-lg-end"},"Disponiblidad: ",-1),Ge=d("label",{for:"is_icbper-product",class:"col-form-label text-lg-end"},"Bolsa de Plastico: ",-1),Me=d("label",{for:"is_ivap-product",class:"col-form-label text-lg-end"},"Arroz Pilado: ",-1),Oe=d("label",{for:"is_isc-product",class:"col-form-label text-lg-end"},"ISC: ",-1),Te={class:"d-flex"},je=d("label",{for:"isc-amount-product",class:"col-form-label text-lg-end"},"Porcentaje: ",-1),He=d("label",{for:"is_especial_nota-product",class:"col-form-label text-lg-end"},"Â¿Para Nota Electronica?: ",-1),qe={class:"d-flex"},Ze=d("label",{for:"include_igv-product",class:"col-form-label text-lg-end"},"Incluye IGV: ",-1),ze=d("label",{for:"price_base_igv",class:"col-form-label text-lg-end"},"Precio Base C.F: ",-1),Je=d("br",null,null,-1),Qe=d("br",null,null,-1),Ke=d("label",{for:"price_base_igv",class:"col-form-label text-lg-end"},"Precio Base C.E: ",-1),We=d("br",null,null,-1),Xe=d("label",{for:"units-product",class:"col-form-label text-lg-end"},"Unidades: ",-1),Ye=d("option",{value:""},"Selec. Unidad",-1),el=["value"],ll=d("label",{for:"stock-product",class:"col-form-label text-lg-end"},"Stock: ",-1),al=d("label",{for:"imagen-product",class:"col-form-label text-lg-end"},"Imagen: ",-1),ol=["src"],tl={class:"modal-footer"},pl=ue({__name:"edit",setup(dl){const U=u(""),h=u(""),E=u(""),j=u([]),g=u(0),b=u(0),S=u(""),m=u(1),P=u(0),x=u(1),V=u(1),y=u(1),k=u(1),I=u(0),C=u(1),v=u(1),F=u(""),$=u(0),n=u(void 0),w=u(""),N=u(null),J=u(he),Q=re(),K=async()=>{try{const t=await T.get("products/config");console.log(t),j.value=t.data.categories}catch(t){console.log(t)}};ne(v,()=>{H(),q()});const H=()=>v.value==1?g.value:Number((g.value/1.18).toFixed(6)),q=()=>v.value==1?b.value:Number((b.value/1.18).toFixed(6)),W=t=>{if(t.target.files[0].type.indexOf("image")<0){w.value=null,N.value=null,c.fire("Upps!","SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN","error");return}N.value=t.target.files[0];let e=new FileReader;N.value&&(e.readAsDataURL(N.value),e.onloadend=()=>w.value=e.result)},X=async()=>{var e,R,L,p,s;if(!U.value){c.fire("Upps!","Necesitas digitar el nombre del producto","error");return}if(!h.value){c.fire("Upps!","Necesitas digitar el sku del producto","error");return}if(!E.value){c.fire("Upps!","Necesitas seleccionar una categoria del producto","error");return}if(!F.value){c.fire("Upps!","Necesitas seleccionar una unidad del producto","error");return}if(g.value==0){c.fire("Upps!","Necesitas digitar el precio de cliente final del producto","error");return}if(b.value==0){c.fire("Upps!","Necesitas digitar el precio empresa del producto","error");return}if(m.value==2&&P.value==0){c.fire("Upps!","Necesitas digitar un descuento para el producto","error");return}if(k.value==2&&I.value<=0){c.fire("Upps!","Necesitas digitar un porcentaje ISC","error");return}if($.value==0){c.fire("Upps!","Necesitas digitar el stock para el producto","error");return}let t=new FormData;t.append("title",U.value),t.append("sku",h.value),t.append("categorie_id",E.value),t.append("price_general",g.value+""),t.append("price_company",b.value+""),S.value&&t.append("description",S.value),t.append("is_discount",m.value+""),t.append("max_discount",P.value+""),t.append("disponiblidad",x.value+""),t.append("include_igv",v.value+""),t.append("is_icbper",V.value+""),t.append("is_ivap",y.value+""),t.append("unidad_medida",F.value),t.append("stock",$.value+""),t.append("percentage_isc",I.value+""),t.append("is_especial_nota",C.value+""),N.value&&t.append("image",N.value);try{const _=await T.post("products/"+((e=n.value)==null?void 0:e.id),t);_.data.code==405?c.fire("Upps!",_.data.message,"error"):c.fire("Genial!",_.data.message,"success")}catch(_){console.log(_),(L=(R=_.response)==null?void 0:R.data)!=null&&L.error&&c.fire("Upps!",(s=(p=_.response)==null?void 0:p.data)==null?void 0:s.error,"error")}},Y=async()=>{try{const t=await T.get("products/"+Q.params.id);console.log(t),n.value=t.data.product,n.value&&(E.value=n.value.categorie_id+"",F.value=n.value.unidad_medida,U.value=n.value.title,h.value=n.value.sku,g.value=n.value.price_general,b.value=n.value.price_company,S.value=n.value.description,m.value=n.value.is_discount,P.value=n.value.max_discount,v.value=n.value.include_igv,V.value=n.value.is_icbper,y.value=n.value.is_ivap,x.value=n.value.disponiblidad,$.value=n.value.stock,w.value=n.value.imagen,I.value=n.value.percentage_isc,k.value=n.value.percentage_isc>0?2:1,C.value=n.value.is_especial_nota)}catch(t){console.log(t)}};return ie(()=>{K(),Y()}),(t,e)=>{const R=ve,L=_e,p=ge,s=ce,_=be,D=fe,ee=ke,r=xe,le=ye,ae=Ce,oe=Ve,te=Ne,de=me,se=pe;return f(),M(Ue,null,{default:a(()=>[l(D,{class:"justify-content-center"},{default:a(()=>[l(s,{cols:"12"},{default:a(()=>[l(se,null,{default:a(()=>[l(L,null,{default:a(()=>[l(R,null,{default:a(()=>[i("ðŸ›ï¸ EDITAR PRODUCTO")]),_:1})]),_:1}),l(de,{class:"pt-0"},{default:a(()=>[l(D,null,{default:a(()=>[l(s,{lg:"5",md:"5"},{default:a(()=>[Ee,l(p,{type:"text",id:"name-product",modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=o=>U.value=o),placeholder:"Example: Pollos"},null,8,["modelValue"])]),_:1}),l(s,{lg:"4",md:"4"},{default:a(()=>[Se,l(p,{type:"text",id:"sku-product",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=o=>h.value=o),placeholder:"Example: FE4RFF"},null,8,["modelValue"])]),_:1}),l(s,{lg:"3",md:"3"},{default:a(()=>[Pe,l(_,{id:"type_category_list",modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=o=>E.value=o)},{default:a(()=>[Ie,(f(!0),A(z,null,Z(j.value,(o,G)=>(f(),A("option",{key:G,value:o.id},B(o.title),9,Fe))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(s,{lg:"3",md:"3"},{default:a(()=>[$e,l(p,{type:"number",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o),id:"price-final-product",placeholder:"Example: 150"},null,8,["modelValue"])]),_:1}),l(s,{lg:"3",md:"3"},{default:a(()=>[we,l(p,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=o=>b.value=o),id:"price-empresa-product",placeholder:"Example: 250"},null,8,["modelValue"])]),_:1}),l(s,{lg:"5",md:"5"},{default:a(()=>[De,l(ee,{type:"textarea",modelValue:S.value,"onUpdate:modelValue":e[5]||(e[5]=o=>S.value=o),rows:"5",id:"description-product"},null,8,["modelValue"])]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(s,{lg:"3",md:"3"},{default:a(()=>[Ae,d("div",Be,[l(r,{name:"is_discount",onClick:e[6]||(e[6]=o=>m.value=1),value:"1",checked:m.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),i(" "+B(" ")+" "),l(r,{name:"is_discount",onClick:e[7]||(e[7]=o=>m.value=2),value:"2",checked:m.value==2,class:"mx-1"},{default:a(()=>[i("Si")]),_:1},8,["checked"])])]),_:1}),m.value==2?(f(),M(s,{key:0,lg:"3",md:"3"},{default:a(()=>[Re,l(p,{type:"number",modelValue:P.value,"onUpdate:modelValue":e[8]||(e[8]=o=>P.value=o),id:"discount-amount-product",placeholder:"Example: 60%"},null,8,["modelValue"])]),_:1})):O("",!0),l(s,{lg:"3",md:"3"},{default:a(()=>[Le,l(r,{name:"disponiblidad",onClick:e[9]||(e[9]=o=>x.value=1),value:"1",checked:x.value==1},{default:a(()=>[i("Vender los productos sin stock")]),_:1},8,["checked"]),l(r,{name:"disponiblidad",onClick:e[10]||(e[10]=o=>x.value=2),value:"2",checked:x.value==2},{default:a(()=>[i("No vender los productos sin stock")]),_:1},8,["checked"])]),_:1}),l(s,{lg:"3",md:"3"},{default:a(()=>[Ge,l(r,{name:"is_icbper",onClick:e[11]||(e[11]=o=>V.value=1),value:"1",checked:V.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),l(r,{name:"is_icbper",onClick:e[12]||(e[12]=o=>V.value=2),value:"2",checked:V.value==2},{default:a(()=>[i("Si")]),_:1},8,["checked"])]),_:1}),l(s,{lg:"3",md:"3"},{default:a(()=>[Me,l(r,{name:"is_ivap",onClick:e[13]||(e[13]=o=>y.value=1),value:"1",checked:y.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),l(r,{name:"is_ivap",onClick:e[14]||(e[14]=o=>y.value=2),value:"2",checked:y.value==2},{default:a(()=>[i("Si")]),_:1},8,["checked"])]),_:1}),l(s,{lg:"2",md:"3"},{default:a(()=>[Oe,d("div",Te,[l(r,{name:"is_isc",onClick:e[15]||(e[15]=o=>k.value=1),value:"1",checked:k.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),l(r,{name:"is_isc",onClick:e[16]||(e[16]=o=>k.value=2),class:"mx-1",value:"2",checked:k.value==2},{default:a(()=>[i("Si")]),_:1},8,["checked"])])]),_:1}),k.value==2?(f(),M(s,{key:1,lg:"2",md:"3"},{default:a(()=>[je,l(p,{type:"number",modelValue:I.value,"onUpdate:modelValue":e[17]||(e[17]=o=>I.value=o),id:"isc-amount-product",placeholder:"Example: 60%"},null,8,["modelValue"])]),_:1})):O("",!0),l(s,{lg:"2",md:"3"},{default:a(()=>[He,d("div",qe,[l(r,{name:"is_especial_nota",onClick:e[18]||(e[18]=o=>C.value=1),value:"1",checked:C.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),l(r,{name:"is_especial_nota",onClick:e[19]||(e[19]=o=>C.value=2),class:"mx-1",value:"2",checked:C.value==2},{default:a(()=>[i("Si")]),_:1},8,["checked"])])]),_:1}),l(s,{lg:"1",md:"1"},{default:a(()=>[Ze,l(r,{name:"include_igv",onClick:e[20]||(e[20]=o=>v.value=1),value:"1",checked:v.value==1},{default:a(()=>[i("No")]),_:1},8,["checked"]),l(r,{name:"include_igv",onClick:e[21]||(e[21]=o=>v.value=2),value:"2",checked:v.value==2},{default:a(()=>[i("Si")]),_:1},8,["checked"])]),_:1}),l(s,{lg:"2",md:"2"},{default:a(()=>[ze,Je,i(" S/. "),d("span",null,B(H()),1),Qe,Ke,We,i(" S/. "),d("span",null,B(q()),1)]),_:1})]),_:1}),l(D,null,{default:a(()=>[l(s,{lg:"3",md:"3"},{default:a(()=>[Xe,l(_,{id:"type_units_list",modelValue:F.value,"onUpdate:modelValue":e[22]||(e[22]=o=>F.value=o)},{default:a(()=>[Ye,(f(!0),A(z,null,Z(J.value,(o,G)=>(f(),A("option",{key:G,value:o.code},B(o.name),9,el))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{lg:"3",md:"3"},{default:a(()=>[ll,l(p,{type:"number",id:"stock-product",modelValue:$.value,"onUpdate:modelValue":e[23]||(e[23]=o=>$.value=o),placeholder:"Example: 5"},null,8,["modelValue"])]),_:1}),l(s,{lg:"5"},{default:a(()=>[al,l(oe,{class:"mb-3"},{default:a(()=>[l(le,{onChange:e[24]||(e[24]=o=>W(o))}),l(ae,null,{default:a(()=>[i("Upload")]),_:1})]),_:1}),w.value?(f(),A("img",{key:0,src:w.value,alt:"",width:"150px",class:"rounded d-block mx-auto"},null,8,ol)):O("",!0)]),_:1}),l(s,{lg:"12",class:"mt-3"},{default:a(()=>[d("div",tl,[l(te,{type:"button",variant:"primary",onClick:X},{default:a(()=>[i(" Editar ")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{pl as default};
