import{h as He,r as i,w as fe,Q as Je,l as x,m as t,k as Ke,q as d,y as e,t as a,D as p,H as u,u as Ye,L as je,v as Qe,P as Fe,R as Ze,S as We,J as m,a7 as Xe,N as el,x as ll,E as tl,B as f,G as ne,F as ue,ad as Ie,M as al,a6 as ol,ab as nl}from"./index-DUcIh1Y0.js";import{_ as ul}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-DcrSClfx.js";import{S as Ae}from"./selectr.min-jlis1QHt.js";import{H}from"./http-client-BDz097Pl.js";import{S as b}from"./sweetalert2-CrXeWwu_.js";import"./logo-sm-CPlBPHhB.js";const sl={class:"d-flex flex-wrap justify-space-between gap-4 mb-6"},il={class:"d-flex flex-column justify-center"},dl={class:"text-h4 mb-1"},cl=e("p",{class:"text-body-1 mb-0"}," Orders placed across your store ",-1),rl=e("i",{class:"fas fa-cart-plus fs-18"},null,-1),vl=e("i",{class:"fas fa-file-alt fs-18"},null,-1),_l=e("i",{class:"fas fa-file-alt fs-18"},null,-1),pl=e("label",{for:"is_exportacion-c",class:"col-form-label text-lg-end"},"Exportaci√≥n: ",-1),fl={class:"d-flex"},ml=e("label",{for:"n-transaction",class:"col-form-label text-lg-end"},"N¬∞ de Venta/Cotizaci√≥n: ",-1),bl=e("label",{for:"n-f-emision",class:"col-form-label text-lg-end"},"Fecha de Emisi√≥n: ",-1),gl=e("label",{for:"n-f-clients",class:"col-form-label text-lg-end"},"Clientes: ",-1),yl={id:"n-f-clients"},hl=e("option",{value:""},"Selec. Cliente",-1),kl=["value"],xl={key:0},Nl=e("label",{for:"retencion-igv-c",class:"col-form-label text-lg-end"},"Retenciones IGV: ",-1),Cl={class:"d-flex"},Vl=e("label",{for:"is_anticipo-c",class:"col-form-label text-lg-end"},"Anticipo: ",-1),Tl={class:"d-flex"},El={class:"d-flex align-items-center"},Fl=e("label",{for:"n-of-comprobante",class:"col-form-label"},"N¬∞ de Compr. o N¬∞ Venta: ",-1),Il={key:0},Al=e("i",{class:"far fa-plus-square ml-3"},null,-1),Pl=e("i",{class:"fas fa-sync ml-3"},null,-1),Ul={key:0,class:"table-responsive m-0"},Sl=e("thead",{class:"table-light"},[e("th",null,"ANTICIPOS"),e("th")],-1),wl=e("i",{class:"las la-trash-alt ml-3"},null,-1),Ol=e("label",{for:"FB",class:"col-form-label text-lg-end"},"Tipo: ",-1),Bl=e("option",{value:"F001"},"F001",-1),$l=e("option",{value:"B001"},"B001",-1),Dl={class:"row"},Rl={class:"col-12"},Gl=e("label",{for:"n-f-products",class:"col-form-label text-lg-end"},"Productos: ",-1),ql={id:"n-f-products"},Ll=e("option",{value:""},"Selec. Producto",-1),Ml=["value"],zl={key:0,class:"col-12 mt-2"},Hl={key:0},Jl={key:1},Kl=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),Yl=e("option",{value:"10"},"Gravado - Operaci√≥n Onerosa",-1),jl=e("option",{value:"20"},"Exonerado - Operaci√≥n Onerosa",-1),Ql=e("option",{value:"30"},"Inafecta - Operaci√≥n Onerosa",-1),Zl=e("option",{value:"11"},"Gravado ‚Äì Retiro por premio",-1),Wl=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),Xl=e("option",{value:"40"},"Exportaci√≥n de Bienes o Servicios",-1),et=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),lt=e("option",{value:"17"},"Gravado - IVAP",-1),tt=e("label",{for:"n-f-discount",class:"col-form-label text-lg-end"},"Descuento: ",-1),at=e("label",{for:"n-f-cantidad",class:"col-form-label text-lg-end"},"Cantidad: ",-1),ot=e("label",{for:"n-f-precio-base",class:"col-form-label text-lg-end"},"Precio Base: ",-1),nt=e("i",{class:"far fa-plus-square ml-3"},null,-1),ut={class:"table-responsive m-0"},st={class:"table datatable"},it=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Id"),e("th",null,"Producto"),e("th",null,"Unidad"),e("th",null,"Cantidad"),e("th",null,"Precio Base"),e("th",null,"Igv"),e("th",null,"Descuento"),e("th",null,"Precio Final"),e("th",null,"SubTotal"),e("th",null,"Acci√≥n")])],-1),dt={key:0},ct={key:1},rt=e("i",{class:"fas fa-prescription-bottle"},null,-1),vt=e("label",{for:"n-discount-global",class:"col-form-label text-lg-end"},"Descuento Global: ",-1),_t={style:{width:"90%"}},pt=e("td",null,"IGV",-1),ft=e("td",null,"SubTotal",-1),mt=e("td",null,"Total",-1),bt={key:0},gt=e("td",null,"Retenci√≥n",-1),yt={key:1},ht=e("td",null,"Detracci√≥n",-1),kt={key:2},xt=e("td",null,"Percepci√≥n",-1),Nt={key:3},Ct=e("td",null,"Total Anticipo",-1),Vt={key:4},Tt=e("td",null,"Ivap Total",-1),Et={key:5},Ft=e("td",null,"Icbper Total",-1),It={key:6},At=e("td",null,"Isc Total",-1),Pt=e("td",null,"Descuento",-1),Ut=e("label",{for:"type-pay-c",class:"col-form-label text-lg-end"},"Tipo: ",-1),St={class:"d-flex"},wt=e("label",{for:"n-f-method-payment",class:"col-form-label text-lg-end"},"Metodo de Pago: ",-1),Ot=e("option",{value:"EFECTIVO"},"EFECTIVO",-1),Bt=e("option",{value:"TRANSFERENCIA"},"TRANSFERENCIA",-1),$t=e("option",{value:"YAPE"},"YAPE",-1),Dt=e("option",{value:"PLIN"},"PLIN",-1),Rt=e("option",{value:"TARJETA DE CREDITO"},"TARJETA DE CREDITO",-1),Gt=e("label",{for:"n-f-amount",class:"col-form-label text-lg-end"},"Monto: ",-1),qt=e("label",{for:"n-f-payment",class:"col-form-label text-lg-end"},"Fecha de Pago: ",-1),Lt=e("label",{class:"col-form-label text-lg-end"},"Agregar: ",-1),Mt=e("i",{class:"far fa-plus-square ml-3"},null,-1),zt={class:"table-responsive m-0"},Ht={class:"table datatable"},Jt={class:"table-light"},Kt=e("th",null,"Id",-1),Yt=e("th",null,"Metodo de Pago",-1),jt=e("th",null,"Monto",-1),Qt={key:0},Zt=e("th",null,"Acci√≥n",-1),Wt={key:0},Xt=e("i",{class:"fas fa-prescription-bottle"},null,-1),ea=e("label",{for:"description-product",class:"col-form-label text-lg-end"},"Descripci√≥n: ",-1),la=e("i",{class:"far fa-plus-square ml-3"},null,-1),ca=He({__name:"edit",setup(ta){const me=Ke(),E=i(1),A=i(0),be=i("0000000000"),ge=i(""),ye=i([]),C=i(void 0),he=i(null),F=i(0),Y=i(0),X=i(""),j=i(null),se=i("F001"),ie=i([]),c=i(void 0),ke=i(null),N=i(10),de=i(0),B=i(0),V=i(0),T=i([]),y=i("S/."),G=i(0),Ve=i(0),I=i(1),q=i(0),Q=i(""),$=i([]),ce=i(""),Z=i("EFECTIVO"),L=i(0),xe=i(0),re=i(0),ve=i(0),Ne=i(0),_e=i(0),pe=i(0),ee=i(0),le=i(0),te=i(0),v=i(null),M=i([]),z=i(0),J=i(0),W=i(0),ae=()=>{var o;if(c.value){if(((o=c.value)==null?void 0:o.include_igv)==2&&c.value.percentage_isc>0){let l=c.value.percentage_isc*.01;const s=1+l+(1+l)*.18;return Number((c.value.price_general/s).toFixed(6))}return c.value.include_igv==1?c.value.price_general:Number((c.value.price_general/1.18).toFixed(6))}return 0},Ce=()=>{var o;if(c.value){if(((o=c.value)==null?void 0:o.include_igv)==2&&c.value.percentage_isc>0){let l=c.value.percentage_isc*.01;const s=1+l+(1+l)*.18;return Number((c.value.price_company/s).toFixed(6))}return c.value.include_igv==1?c.value.price_company:Number((c.value.price_company/1.18).toFixed(6))}return 0},Pe=async()=>{try{const o=await H.get("sales/config");console.log(o),ie.value.length==0&&(ie.value=o.data.products.data,ye.value=o.data.clients.data,setTimeout(()=>{he.value=new Ae("#n-f-clients"),ke.value=new Ae("#n-f-products")},25)),setTimeout(()=>{he.value.on("selectr.change",l=>{console.log(l.value),C.value=ye.value.find(s=>s.id==l.value),c.value&&C.value&&(C.value.type_client=="1"?V.value=ae():V.value=Ce())}),ke.value.on("selectr.change",l=>{console.log(l.value),c.value=ie.value.find(s=>s.id==l.value),c.value&&(c.value.is_ivap==2?N.value=17:N.value=10,C.value?C.value.type_client=="1"?V.value=ae():V.value=Ce():V.value=ae())}),Me()},50)}catch(o){console.log(o)}},Ue=async()=>{var o,l;try{if(!C.value){b.fire("Upps!","Necesitas seleccionar un cliente","error");return}if(T.value.length==0){b.fire("Upps!","Necesitas agregar al menos un producto al detallado","error");return}if(E.value==1&&$.value.length==0&&D()>0){b.fire("Upps!","Necesitas agregar un pago a la venta","error");return}if($.value.length>0&&D()!=L.value){b.fire("Upps!","Necesitas eliminar el pago para poder continuar con la edici√≥n","error");return}let s=1;E.value==1&&(L.value!=D()&&(s=2),L.value==D()&&(s=3));let g={client_id:C.value.id,type_client:C.value.type_client,state_sale:E.value,state_payment:s,debt:D()-L.value,paid_out:L.value,type_payment:I.value,retencion_igv:F.value,discount_global:G.value,description:ce.value,serie:se.value,amount_anticipo:z.value>0?z.value:null,n_comprobante_anticipo:null,sales_anticipos:M.value.length>0?M.value:null,igv_discount_general:W.value,is_exportacion:A.value,currency:y.value};const h=await H.put("sales/"+me.params.id,g);if(h.data.error){b.fire("Upps!",h.data.error.message,"error");return}h.data.code==200&&b.fire("Genial!",h.data.message,"success"),console.log(h)}catch(s){if(console.log(s),(o=s.response)!=null&&o.data){b.fire("Upps!",(l=s.response)==null?void 0:l.data.message,"error");return}}},Se=async()=>{var o,l;try{const s=await H.get("sales/search_sale/"+X.value);console.log(s),s.data.code==403?(b.fire("Upps!",s.data.message,"warning"),X.value=""):(j.value=s.data.sale,b.fire("Genial!","Se ha encontrado la venta #"+j.value.id,"success"))}catch(s){if(console.log(s),(o=s.response)!=null&&o.data){b.fire("Upps!",(l=s.response)==null?void 0:l.data.message,"error");return}}},we=()=>{M.value.push(j.value),Te(),S()},Oe=o=>{M.value.splice(o,1)},Te=()=>{j.value=null,X.value=""},Be=async()=>{var K;if(!c.value){b.fire("Upps!","Necesitas seleccionar un producto","error");return}if(B.value==0){b.fire("Upps!","Necesitas digitar una cantidad","error");return}let o=de.value*B.value,l=B.value*V.value-o,s=c.value.is_ivap==2?l*.04:0,g=.18;[10,11].includes(Number(N.value))||(g=0);let h=0,w=c.value.percentage_isc,r=l*w*.01;c.value.is_ivap==2?h=s:h=(l+r)*g;let P=Number(((l+h+r)/B.value).toFixed(5)),U=c.value.is_icbper==2?.5*B.value:0,O={sale_id:(K=v.value)==null?void 0:K.id,product:c.value,unidad_medida:c.value.unidad_medida,price_base:V.value,price_final:P,quantity:B.value,discount:o,igv:h,subtotal:l,per_icbper:c.value.is_icbper==2?.5:0,icbper:U,tip_afe_igv:N.value,percentage_isc:w,isc:r};const R=await H.post("sale-details/",O);console.log(R.data),T.value.unshift(R.data.sale_detail),b.fire("Genial!",R.data.message,"success"),S(),$e()},$e=()=>{ke.value.setValue(""),c.value=void 0,V.value=0,B.value=0,de.value=0,N.value=10},De=o=>{b.fire({title:"Confirmar la eliminaci√≥n",text:"¬øEstas seguro de eliminar este producto ''"+o.product.title+"'' ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminalo!"}).then(async l=>{if(l.isConfirmed)try{const s=await H.delete("sale-details/"+o.id);console.log(s),b.fire("Genial!",s.data.message,"success");let g=T.value.findIndex(h=>h.id==s.data.sale_detail_id);g!=-1&&T.value.splice(g,1),setTimeout(()=>{S()},25)}catch(s){console.log(s)}})},S=()=>{switch(xe.value=Number(T.value.filter(o=>![11].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.igv,0).toFixed(5)),J.value=0,W.value=0,G.value>0&&(J.value=J.value+G.value),Ve.value=Number(T.value.filter(o=>![11].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.discount,0).toFixed(5)),re.value=Number(T.value.filter(o=>![11].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.subtotal,0).toFixed(5)),Ne.value=Number(T.value.filter(o=>[17].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.igv,0).toFixed(5)),_e.value=Number(T.value.filter(o=>![11].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.icbper,0).toFixed(5)),pe.value=Number(T.value.filter(o=>![11].includes(Number(o.tip_afe_igv))).reduce((o,l)=>o+l.isc,0).toFixed(5)),ve.value=Number((re.value+xe.value).toFixed(5)),L.value=Number($.value.reduce((o,l)=>o+l.amount,0).toFixed(5)),z.value=Number(M.value.reduce((o,l)=>o+Number(l.subtotal),0).toFixed(2)),z.value>0&&(J.value=J.value+z.value,W.value=Number((z.value*.18).toFixed(2))),ee.value=0,le.value=0,te.value=0,F.value){case 1:ee.value=Number((ve.value*.03).toFixed(5));break;case 2:le.value=Number((ve.value*.04).toFixed(5));break;case 3:te.value=Number((re.value*.04).toFixed(5));break}D()},Re=()=>Number((xe.value-W.value).toFixed(6)),Ge=()=>Number((re.value-J.value).toFixed(6)),D=()=>Number((ve.value+_e.value+pe.value+te.value-(le.value+ee.value+W.value+J.value)).toFixed(5)),qe=async()=>{var s;if(!Z.value){b.fire("Upps!","Necesitas seleccionar un metodo de pago","error");return}if(q.value<=0){b.fire("Upps!","Necesitas ingresar un monto de pago","error");return}if(I.value==2&&!Q.value){b.fire("Upps!","Necesitas seleccionar una fecha de pago","error");return}if(D()<L.value+q.value){b.fire("Upps!","No puedes agregar mas pagos, porque supera al total de la venta","error");return}if(I.value==1&&D()>L.value+q.value){b.fire("Upps!","Necesitas ponerle un monto que sea igual al total de la venta, porque es Al contado","error");return}let o={sale_id:(s=v.value)==null?void 0:s.id,method_payment:Z.value,amount:q.value,date_payment:Q.value};const l=await H.post("sale-payments/",o);console.log(l.data),$.value.unshift(l.data.payment),b.fire("Genial!",l.data.message,"success"),setTimeout(()=>{Z.value="EFECTIVO",q.value=0,Q.value="",S()},25)},Le=o=>{b.fire({title:"Confirmar la eliminaci√≥n",text:"¬øEstas seguro de eliminar este pago '"+o.id+"' ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminalo!"}).then(async l=>{if(l.isConfirmed)try{const s=await H.delete("sale-payments/"+o.id);console.log(s),b.fire("Genial!",s.data.message,"success");let g=$.value.findIndex(h=>h.id==s.data.sale_payment_id);g!=-1&&$.value.splice(g,1),setTimeout(()=>{S()},25)}catch(s){console.log(s)}})};fe(A,o=>{o==1?y.value="$. ":y.value="S/. ",T.value=[],S(),G.value=0}),fe(N,o=>{Number(o)==11||c.value&&(C.value?C.value.type_client=="1"?V.value=ae():V.value=Ce():V.value=ae())}),fe(F,o=>{S()}),fe(I,o=>{$.value=[],setTimeout(()=>{Z.value="EFECTIVO",q.value=0,Q.value="",S()},25)});const Me=async()=>{try{const o=await H.get("sales/"+me.params.id);if(console.log(o.data),o.data.code!=200){b.fire("Upps!",o.data.message,"error");return}else o.data.sale&&(v.value=o.data.sale,C.value=v.value.client,he.value.setValue(v.value.client.id),T.value=v.value.sale_details,$.value=v.value.payments,I.value=v.value.type_payment,ce.value=v.value.description,E.value=v.value.state_sale,F.value=v.value.retencion_igv,G.value=v.value.discount_global,se.value=v.value.serie,A.value=v.value.is_exportacion,y.value=v.value.currency,ge.value=v.value.created_at_format,be.value=v.value.n_transaction,v.value.sales_anticipos&&(M.value=v.value.sales_anticipos,Y.value=1),setTimeout(()=>{S()},25))}catch(o){console.log(o)}};return Je(()=>{Pe()}),(o,l)=>{const s=We,g=Xe,h=Ze,w=Qe,r=je,P=el,U=tl,O=al,R=ol,K=ll,ze=nl;return d(),x(ul,null,{default:t(()=>{var Ee;return[e("div",sl,[e("div",il,[e("h4",dl," üí∞ Edit Sale/Cotizaci√≥n: # "+u(Ye(me).params.id),1),cl])]),a(P,{class:"mt-2"},{default:t(()=>{var n,_,k;return[a(r,{lg:"5",md:"5"},{default:t(()=>[a(w,{"no-body":"",class:Fe({"border-sale":E.value==1})},{default:t(()=>[a(h,{class:"text-center"},{default:t(()=>[rl,a(s,{class:"py-1"},{default:t(()=>[m("VENTA")]),_:1}),a(g,{name:"state_sale",onClick:l[0]||(l[0]=oe=>E.value=1),value:"1",checked:E.value==1},null,8,["checked"])]),_:1})]),_:1},8,["class"])]),_:1}),v.value&&!((n=v.value)!=null&&n.n_operacion)?(d(),x(r,{key:0,lg:"2",md:"2"})):p("",!0),v.value&&!((_=v.value)!=null&&_.n_operacion)?(d(),x(r,{key:1,lg:"5",md:"5"},{default:t(()=>[a(w,{"no-body":"",class:Fe({"border-sale":E.value==2})},{default:t(()=>[a(h,{class:"text-center"},{default:t(()=>[vl,a(s,{class:"py-1"},{default:t(()=>[m("COTIZACI√ìN")]),_:1}),a(g,{name:"state_sale",onClick:l[1]||(l[1]=oe=>E.value=2),value:"2",checked:E.value==2},null,8,["checked"])]),_:1})]),_:1},8,["class"])]),_:1})):p("",!0),v.value&&((k=v.value)!=null&&k.n_operacion)?(d(),x(r,{key:2,lg:"7",md:"7"},{default:t(()=>[a(w,{"no-body":"",class:"border-sale"},{default:t(()=>[a(h,{class:"text-center"},{default:t(()=>[_l,a(s,{class:"py-1"},{default:t(()=>[m("COMPROBANTE ELECTRONICO EMITIDO: "+u(v.value.n_operacion),1)]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0)]}),_:1}),a(w,{"no-body":""},{default:t(()=>[a(h,null,{default:t(()=>[a(s,null,{default:t(()=>[m("üî© Datos Generales")]),_:1})]),_:1}),a(K,{class:"pt-0"},{default:t(()=>[a(P,null,{default:t(()=>[a(r,{lg:"2"},{default:t(()=>[pl,e("div",fl,[a(g,{name:"is_exportacion-c",onClick:l[2]||(l[2]=n=>A.value=0),value:"0",checked:A.value==0},{default:t(()=>[m("No")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"is_exportacion-c",class:"mx-2",onClick:l[3]||(l[3]=n=>A.value=1),value:"1",checked:A.value==1},{default:t(()=>[m("Si")]),_:1},8,["checked"]),m(" "+u(" "))])]),_:1}),a(r,{lg:"2",md:"3"},{default:t(()=>[ml,a(U,{type:"text",id:"n-transaction",modelValue:be.value,"onUpdate:modelValue":l[4]||(l[4]=n=>be.value=n),placeholder:"000000",disabled:""},null,8,["modelValue"])]),_:1}),a(r,{lg:"2",md:"3"},{default:t(()=>[bl,a(U,{type:"date",id:"n-f-emision",modelValue:ge.value,"onUpdate:modelValue":l[5]||(l[5]=n=>ge.value=n),disabled:""},null,8,["modelValue"])]),_:1}),a(r,{lg:"5",md:"5"},{default:t(()=>[gl,e("select",yl,[hl,(d(!0),f(ue,null,ne(ye.value,(n,_)=>(d(),f("option",{key:_,value:n.id},u(n.full_name),9,kl))),128))]),C.value?(d(),f("b",xl,u(C.value.type_client=="1"?"CLIENTE FINAL":"CLIENTE EMPRESA"),1)):p("",!0)]),_:1}),A.value==0?(d(),x(r,{key:0,lg:"5"},{default:t(()=>[Nl,e("div",Cl,[a(g,{name:"retencion-igv-c",onClick:l[6]||(l[6]=n=>F.value=0),value:"0",checked:F.value==0},{default:t(()=>[m("Ninguno")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"retencion-igv-c",class:"mx-2",onClick:l[7]||(l[7]=n=>F.value=1),value:"1",checked:F.value==1},{default:t(()=>[m("Retenci√≥n")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"retencion-igv-c",class:"mx-2",onClick:l[8]||(l[8]=n=>F.value=2),value:"2",checked:F.value==2},{default:t(()=>[m("Detracci√≥n")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"retencion-igv-c",class:"mx-2",onClick:l[9]||(l[9]=n=>F.value=3),value:"3",checked:F.value==3},{default:t(()=>[m("Percepci√≥n")]),_:1},8,["checked"])])]),_:1})):p("",!0),a(r,{lg:"2"},{default:t(()=>[Vl,e("div",Tl,[a(g,{name:"is_anticipo-c",onClick:l[10]||(l[10]=n=>Y.value=0),value:"0",checked:Y.value==0},{default:t(()=>[m("No")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"is_anticipo-c",class:"mx-2",onClick:l[11]||(l[11]=n=>Y.value=1),value:"1",checked:Y.value==1},{default:t(()=>[m("Si")]),_:1},8,["checked"]),m(" "+u(" "))])]),_:1}),Y.value==1?(d(),x(r,{key:1,lg:"2"},{default:t(()=>[e("div",El,[e("div",null,[Fl,a(U,{type:"text",id:"n-of-comprobante",modelValue:X.value,"onUpdate:modelValue":l[12]||(l[12]=n=>X.value=n),onKeyup:l[13]||(l[13]=Ie(n=>Se(),["enter"])),placeholder:"",disabled:!!j.value},null,8,["modelValue","disabled"])]),j.value?(d(),f("div",Il,[a(O,{type:"button",class:"rounded-pill btn btn-info",onClick:l[14]||(l[14]=n=>we())},{default:t(()=>[Al]),_:1}),a(O,{type:"button",class:"rounded-pill btn btn-dark",onClick:l[15]||(l[15]=n=>Te())},{default:t(()=>[Pl]),_:1})])):p("",!0)]),M.value.length>0?(d(),f("div",Ul,[e("table",null,[Sl,e("tbody",null,[(d(!0),f(ue,null,ne(M.value,(n,_)=>(d(),f("tr",{key:_},[e("td",null,u(n.n_operacion),1),e("td",null,[a(O,{type:"button",class:"rounded-pill btn btn-danger",onClick:k=>Oe(_)},{default:t(()=>[wl]),_:2},1032,["onClick"])])]))),128))])])])):p("",!0)]),_:1})):p("",!0),a(r,{lg:"2"},{default:t(()=>[Ol,a(R,{id:"FB",modelValue:se.value,"onUpdate:modelValue":l[16]||(l[16]=n=>se.value=n)},{default:t(()=>[Bl,$l]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),(Ee=v.value)!=null&&Ee.n_operacion?p("",!0):(d(),x(w,{key:0,"no-body":""},{default:t(()=>[a(h,null,{default:t(()=>[a(s,null,{default:t(()=>[m("üì¶ Datos del Producto")]),_:1})]),_:1}),a(K,{class:"pt-0"},{default:t(()=>[a(P,null,{default:t(()=>[a(r,{lg:"5",md:"5"},{default:t(()=>[e("div",Dl,[e("div",Rl,[Gl,e("select",ql,[Ll,(d(!0),f(ue,null,ne(ie.value,(n,_)=>(d(),f("option",{key:_,value:n.id},u(n.title),9,Ml))),128))])]),c.value?(d(),f("div",zl,[c.value.is_icbper==2?(d(),f("span",Hl,"Es Bolsa de Plastico")):p("",!0),c.value.is_ivap==2?(d(),f("span",Jl,"Es Arroz Pilado")):p("",!0)])):p("",!0)])]),_:1}),a(r,{lg:"3",md:"3"},{default:t(()=>[a(P,null,{default:t(()=>{var n,_;return[c.value&&((n=c.value)==null?void 0:n.is_ivap)==1&&A.value==0?(d(),x(r,{key:0,lg:"12",md:"12"},{default:t(()=>[Kl,a(R,{id:"n-f-type-operation",modelValue:N.value,"onUpdate:modelValue":l[17]||(l[17]=k=>N.value=k)},{default:t(()=>[Yl,jl,Ql,Zl]),_:1},8,["modelValue"])]),_:1})):p("",!0),c.value&&A.value==1?(d(),x(r,{key:1,lg:"12",md:"12"},{default:t(()=>[Wl,a(R,{id:"n-f-type-operation",modelValue:N.value,"onUpdate:modelValue":l[18]||(l[18]=k=>N.value=k)},{default:t(()=>[Xl]),_:1},8,["modelValue"])]),_:1})):p("",!0),c.value&&((_=c.value)==null?void 0:_.is_ivap)==2&&A.value==0?(d(),x(r,{key:2,lg:"12",md:"12"},{default:t(()=>[et,a(R,{id:"n-f-type-operation",modelValue:N.value,"onUpdate:modelValue":l[19]||(l[19]=k=>N.value=k)},{default:t(()=>[lt]),_:1},8,["modelValue"])]),_:1})):p("",!0),c.value&&c.value.is_discount==2?(d(),x(r,{key:3,lg:"12",md:"12"},{default:t(()=>[tt,a(U,{type:"number",id:"n-f-discount",modelValue:de.value,"onUpdate:modelValue":l[20]||(l[20]=k=>de.value=k),placeholder:"",disabled:Number(N.value)==11},null,8,["modelValue","disabled"])]),_:1})):p("",!0)]}),_:1})]),_:1}),a(r,{lg:"3",md:"3"},{default:t(()=>[a(P,null,{default:t(()=>[a(r,{lg:"12",md:"12"},{default:t(()=>[at,a(U,{type:"number",id:"n-f-cantidad",modelValue:B.value,"onUpdate:modelValue":l[21]||(l[21]=n=>B.value=n),placeholder:""},null,8,["modelValue"])]),_:1}),a(r,{lg:"12",md:"12"},{default:t(()=>[ot,a(U,{type:"number",id:"n-f-precio-base",modelValue:V.value,"onUpdate:modelValue":l[22]||(l[22]=n=>V.value=n),placeholder:"",disabled:Number(N.value)==11},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),a(r,{lg:"1",md:"1"},{default:t(()=>[a(O,{type:"button",variant:"success",onClick:l[23]||(l[23]=n=>Be())},{default:t(()=>[nt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})),a(w,{"no-body":""},{default:t(()=>[a(h,null,{default:t(()=>[a(s,null,{default:t(()=>[m("üìí Detalle de la "+u(E.value==1?"Venta":"Cotizaci√≥n"),1)]),_:1})]),_:1}),a(K,{class:"pt-0"},{default:t(()=>[a(P,null,{default:t(()=>[a(r,{lg:"12"},{default:t(()=>[e("div",ut,[e("table",st,[it,e("tbody",null,[(d(!0),f(ue,null,ne(T.value,(n,_)=>{var k;return d(),f("tr",{key:_},[e("td",null,u(_+1),1),e("td",null,u(n.product.title),1),e("td",null,u(n.unidad_medida),1),e("td",null,u(n.quantity),1),e("td",null,u(y.value)+" "+u(n.price_base),1),e("td",null,u(y.value)+" "+u((n.igv+n.icbper).toFixed(2)),1),e("td",null,u(y.value)+" "+u(n.discount),1),e("td",null,u(y.value)+" "+u(n.price_final),1),[11].includes(Number(n.tip_afe_igv))?p("",!0):(d(),f("td",dt,u(y.value)+" "+u(n.subtotal),1)),[11].includes(Number(n.tip_afe_igv))?(d(),f("td",ct,u(y.value)+" 0 ",1)):p("",!0),e("td",null,[v.value&&!((k=v.value)!=null&&k.n_operacion)?(d(),x(O,{key:0,type:"button",variant:"danger",onClick:oe=>De(n)},{default:t(()=>[rt]),_:2},1032,["onClick"])):p("",!0)])])}),128))])])])]),_:1}),a(r,{lg:"6"},{default:t(()=>[a(P,null,{default:t(()=>[a(r,{lg:"4"},{default:t(()=>[vt,a(U,{type:"number",id:"n-discount-global",modelValue:G.value,"onUpdate:modelValue":l[24]||(l[24]=n=>G.value=n),onKeyup:l[25]||(l[25]=Ie(n=>S(),["enter"])),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,{lg:"6",class:"mt-2"},{default:t(()=>[e("table",_t,[e("tr",null,[pt,e("td",null,u(y.value)+" "+u(Re()),1)]),e("tr",null,[ft,e("td",null,u(y.value)+" "+u(Ge()),1)]),e("tr",null,[mt,e("td",null,u(y.value)+" "+u(D()),1)]),ee.value>0?(d(),f("tr",bt,[gt,e("td",null,u(y.value)+" "+u(ee.value),1)])):p("",!0),le.value>0?(d(),f("tr",yt,[ht,e("td",null,u(y.value)+" "+u(le.value),1)])):p("",!0),te.value>0?(d(),f("tr",kt,[xt,e("td",null,u(y.value)+" "+u(te.value),1)])):p("",!0),z.value>0?(d(),f("tr",Nt,[Ct,e("td",null,u(y.value)+" "+u(z.value+W.value),1)])):p("",!0),Ne.value>0?(d(),f("tr",Vt,[Tt,e("td",null,u(y.value)+" "+u(Ne.value),1)])):p("",!0),_e.value>0?(d(),f("tr",Et,[Ft,e("td",null,u(y.value)+" "+u(_e.value),1)])):p("",!0),pe.value>0?(d(),f("tr",It,[At,e("td",null,u(y.value)+" "+u(pe.value),1)])):p("",!0),e("tr",null,[Pt,e("td",null,u(y.value)+" "+u(Ve.value+G.value),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),a(w,{"no-body":""},{default:t(()=>[a(h,null,{default:t(()=>[a(s,null,{default:t(()=>[m("üíµ Pagos")]),_:1})]),_:1}),a(K,{class:"pt-0"},{default:t(()=>[a(P,null,{default:t(()=>{var n;return[a(r,{lg:"3"},{default:t(()=>[Ut,e("div",St,[a(g,{name:"type-pay-c",onClick:l[26]||(l[26]=_=>I.value=1),value:"1",checked:I.value==1},{default:t(()=>[m("Al contado")]),_:1},8,["checked"]),m(" "+u(" ")+" "),a(g,{name:"type-pay-c",class:"mx-2",onClick:l[27]||(l[27]=_=>I.value=2),value:"2",checked:I.value==2},{default:t(()=>[m("Credito")]),_:1},8,["checked"])])]),_:1}),a(r,{lg:"3"},{default:t(()=>[wt,a(R,{id:"n-f-method-payment",modelValue:Z.value,"onUpdate:modelValue":l[28]||(l[28]=_=>Z.value=_)},{default:t(()=>[Ot,Bt,$t,Dt,Rt]),_:1},8,["modelValue"])]),_:1}),a(r,{lg:"2"},{default:t(()=>[Gt,a(U,{type:"number",id:"n-f-amount",modelValue:q.value,"onUpdate:modelValue":l[29]||(l[29]=_=>q.value=_),placeholder:""},null,8,["modelValue"])]),_:1}),I.value==2?(d(),x(r,{key:0,lg:"3"},{default:t(()=>[qt,a(U,{type:"date",id:"n-f-payment",modelValue:Q.value,"onUpdate:modelValue":l[30]||(l[30]=_=>Q.value=_)},null,8,["modelValue"])]),_:1})):p("",!0),v.value&&!((n=v.value)!=null&&n.n_operacion)?(d(),x(r,{key:1,lg:"1"},{default:t(()=>[Lt,a(O,{type:"button",variant:"primary",onClick:l[31]||(l[31]=_=>qe())},{default:t(()=>[Mt]),_:1})]),_:1})):p("",!0)]}),_:1}),a(P,{class:"mt-2"},{default:t(()=>{var n;return[a(r,{lg:"6"},{default:t(()=>[e("div",zt,[e("table",Ht,[e("thead",Jt,[e("tr",null,[Kt,Yt,jt,I.value==2?(d(),f("th",Qt,"Fecha de Pago")):p("",!0),Zt])]),e("tbody",null,[(d(!0),f(ue,null,ne($.value,(_,k)=>{var oe;return d(),f("tr",{key:k},[e("td",null,u(k+1),1),e("td",null,u(_.method_payment),1),e("td",null,u(y.value)+" "+u(_.amount),1),I.value==2?(d(),f("td",Wt,u(_.date_payment),1)):p("",!0),e("td",null,[v.value&&!((oe=v.value)!=null&&oe.n_operacion)?(d(),x(O,{key:0,type:"button",variant:"danger",onClick:aa=>Le(_)},{default:t(()=>[Xt]),_:2},1032,["onClick"])):p("",!0)])])}),128))])])])]),_:1}),a(r,{lg:"3",md:"3"},{default:t(()=>[ea,a(ze,{type:"textarea",modelValue:ce.value,"onUpdate:modelValue":l[32]||(l[32]=_=>ce.value=_),rows:"5",id:"description-product"},null,8,["modelValue"])]),_:1}),v.value&&!((n=v.value)!=null&&n.n_operacion)?(d(),x(r,{key:0,lg:"3",md:"3",class:"text-end"},{default:t(()=>[a(O,{type:"button",variant:"primary",onClick:l[33]||(l[33]=_=>Ue())},{default:t(()=>[la,m(" Editar "+u(E.value==1?"Venta":"Cotizaci√≥n"),1)]),_:1})]),_:1})):p("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})}}});export{ca as default};
