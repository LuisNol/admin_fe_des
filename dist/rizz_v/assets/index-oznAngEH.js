import{h as z,r as i,_ as K,l as C,m as a,q as d,t as l,L as O,v as W,Q as X,N as Y,R as Z,J as f,M as ee,u as te,aa as T,y as e,E as ae,a4 as le,B as r,G as w,F as U,x as oe,a2 as ne,H as u,D as A,a0 as se}from"./index-BgTyC-eL.js";import{_ as ue}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-DHF5AWSa.js";import{H as B}from"./http-client-BDz097Pl.js";import{S as H}from"./sweetalert2-BCp_6zyy.js";import{U as ie}from"./products-Bm01FGai.js";import"./logo-sm-CPlBPHhB.js";const de=e("i",{class:"far fa-plus-square ml-3"},null,-1),ce=e("option",{value:""},"Selec. Categoria",-1),re=["value"],_e=e("option",{value:""},"Selec. Unidad",-1),me=["value"],fe=e("option",{value:""},"Todos",-1),pe=e("option",{value:"1"},"Activo",-1),ve=e("option",{value:"2"},"Inactivo",-1),ge=e("i",{class:"fas fa-search"},null,-1),he=e("i",{class:"fas fa-sync"},null,-1),ye={class:"table-responsive m-0"},be={class:"table datatable",id:"datatable_1"},ke=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Id"),e("th",null,"Nombre Del Producto"),e("th",null,"Sku"),e("th",null,"Categoria"),e("th",null,"Precio"),e("th",null,"Unidad"),e("th",null,"Stock"),e("th",null,"Estado"),e("th",null,"Fecha de registro"),e("th",null,"AcciÃ³n")])],-1),xe={class:"d-flex align-items-center"},Ve=["src"],Ce=["onClick"],we=e("i",{class:"las la-pen text-secondary fs-22"},null,-1),Ue=[we],Be=["onClick"],Ne=e("i",{class:"las la-trash-alt text-secondary fs-22"},null,-1),Pe=[Ne],qe=z({__name:"index",setup(Se){const p=i([]),N=i(ie),P=i([]),v=i(1),S=i(0),I=i(1),g=i(""),h=i(""),y=i(""),b=i(""),$=async()=>{try{const o=await B.get("products/config");console.log(o),P.value=o.data.categories}catch(o){console.log(o)}},k=async()=>{try{const o=await B.get("products?page="+v.value+"&search="+(g.value??"")+"&categorie_id="+(y.value??"")+"&unidad_medida="+(h.value??"")+"&state="+(b.value??""));console.log(o),p.value=o.data.products.data,S.value=o.data.total,I.value=o.data.pagination}catch(o){console.log(o)}},q=()=>{g.value="",y.value="",h.value="",b.value="",v.value=1,k()},D=async o=>{H.fire({title:"Confirmar la eliminaciÃ³n",text:"Â¿Estas seguro de eliminar este producto ''"+o.title+"'' ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminalo!"}).then(async n=>{if(n.isConfirmed)try{const c=await B.delete("products/"+o.id);console.log(c),H.fire("Genial!",c.data.message,"success");let s=p.value.findIndex(_=>_.id==o.id);s!=-1&&p.value.splice(s,1)}catch(c){console.log(c)}})},F=o=>{let n=N.value.find(c=>c.code==o);return n?n.name:"---"},L=o=>{T.push({name:"products.edit",params:{id:o.id}})};return K(()=>{k(),$()}),(o,n)=>{const c=Z,s=O,_=ee,x=Y,R=ae,V=le,j=X,E=se,G=oe,M=W,J=ne;return d(),C(ue,null,{default:a(()=>[l(x,{class:"justify-content-center"},{default:a(()=>[l(s,{cols:"12"},{default:a(()=>[l(M,{"no-body":""},{default:a(()=>[l(j,null,{default:a(()=>[l(x,{class:"align-items-center justify-content-between"},{default:a(()=>[l(s,{lg:"3"},{default:a(()=>[l(c,null,{default:a(()=>[f("ðŸ›ï¸ Productos")]),_:1})]),_:1}),l(s,{lg:"2"},{default:a(()=>[l(_,{type:"button",variant:"success",onClick:n[0]||(n[0]=t=>te(T).push({name:"products.store"}))},{default:a(()=>[de,f(" Registrar ")]),_:1})]),_:1})]),_:1}),l(x,{class:"align-items-center py-2"},{default:a(()=>[l(s,{lg:"4"},{default:a(()=>[l(R,{type:"text",modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=t=>g.value=t),placeholder:"Buscar por producto"},null,8,["modelValue"])]),_:1}),l(s,{lg:"2"},{default:a(()=>[l(V,{id:"type_category_list",modelValue:y.value,"onUpdate:modelValue":n[2]||(n[2]=t=>y.value=t)},{default:a(()=>[ce,(d(!0),r(U,null,w(P.value,(t,m)=>(d(),r("option",{key:m,value:t.id},u(t.title),9,re))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{lg:"2"},{default:a(()=>[l(V,{id:"type_units_list",modelValue:h.value,"onUpdate:modelValue":n[3]||(n[3]=t=>h.value=t)},{default:a(()=>[_e,(d(!0),r(U,null,w(N.value,(t,m)=>(d(),r("option",{key:m,value:t.code},u(t.name),9,me))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{lg:"2"},{default:a(()=>[l(V,{id:"type_state_list",modelValue:b.value,"onUpdate:modelValue":n[4]||(n[4]=t=>b.value=t)},{default:a(()=>[fe,pe,ve]),_:1},8,["modelValue"])]),_:1}),l(s,{lg:"2",md:"2"},{default:a(()=>[l(_,{type:"button",onClick:k,variant:"success"},{default:a(()=>[ge]),_:1}),l(_,{type:"button",onClick:q,variant:"dark",class:"mx-2"},{default:a(()=>[he]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{class:"pt-0"},{default:a(()=>[e("div",ye,[e("table",be,[ke,e("tbody",null,[(d(!0),r(U,null,w(p.value,(t,m)=>(d(),r("tr",{key:m},[e("td",null,u(t.id),1),e("td",null,[e("div",xe,[e("img",{src:t.imagen,alt:"categorie",class:"thumb-md rounded-circle"},null,8,Ve),e("span",null,u(t.title),1)])]),e("td",null,u(t.sku),1),e("td",null,u(t.categorie.title),1),e("td",null,"S/. "+u(t.price_general)+" PEN",1),e("td",null,u(F(t.unidad_medida)),1),e("td",null,u(t.stock),1),e("td",null,[t.state==1?(d(),C(E,{key:0,variant:"primary"},{default:a(()=>[f("Activo")]),_:1})):A("",!0),t.state==2?(d(),C(E,{key:1,variant:"danger"},{default:a(()=>[f("Inactivo")]),_:1})):A("",!0)]),e("td",null,u(t.created_at),1),e("td",null,[e("a",{href:"#",onclick:"return false;",onClick:Q=>L(t)},Ue,8,Ce),f(u(" ")+" "),e("a",{href:"#",onclick:"return false;",onClick:Q=>D(t)},Pe,8,Be)])]))),128))])])])]),_:1})]),_:1}),l(J,{modelValue:v.value,"onUpdate:modelValue":n[5]||(n[5]=t=>v.value=t),"total-rows":S.value,"per-page":I.value,"prev-text":"Previous","next-text":"Next"},null,8,["modelValue","total-rows","per-page"])]),_:1})]),_:1})]),_:1})}}});export{qe as default};
