import{h as Me,r as n,w as ce,Q as je,l as N,m as t,k as He,q as d,y as l,t as u,L as ze,v as Xe,P as Ee,R as Je,S as Qe,J as f,a7 as Ke,N as We,x as Ye,D as p,H as s,E as Ze,B as x,G as me,F as be,a6 as el,ab as ll,M as tl,a5 as al}from"./index-C4f5H3KO.js";import{_ as ol}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Cm0yAheX.js";import{S as ul}from"./selectr.min-CzQECr3O.js";import{H as ge}from"./http-client-BDz097Pl.js";import{S as w}from"./sweetalert2-DrKviEwM.js";import"./logo-sm-CPlBPHhB.js";const nl=l("div",{class:"d-flex flex-wrap justify-space-between gap-4 mb-6"},[l("div",{class:"d-flex flex-column justify-center"},[l("h4",{class:"text-h4 mb-1"},"  Add New Nota Electr贸nica "),l("p",{class:"text-body-1 mb-0"}," Orders placed across your store ")])],-1),sl=l("i",{class:"fas fa-file-medical fs-18"},null,-1),il=l("i",{class:"fas fa-file-alt fs-18"},null,-1),cl=l("label",{for:"is_exportacion-c",class:"col-form-label text-lg-end"},"Exportaci贸n: ",-1),dl={class:"d-flex"},rl=l("label",{for:"n-operation",class:"col-form-label text-lg-end"},"N掳 de Operaci贸n: ",-1),vl=l("label",{for:"n-f-emision",class:"col-form-label text-lg-end"},"Fecha de Emisi贸n: ",-1),_l=l("label",{for:"n-f-clients",class:"col-form-label text-lg-end"},"Clientes: ",-1),pl={id:"n-f-clients"},fl=l("option",{value:""},"Selec. Cliente",-1),ml=["value"],bl={key:0},gl=l("label",{for:"retencion-igv-c",class:"col-form-label text-lg-end"},"Retenciones IGV: ",-1),yl={class:"d-flex"},hl=l("label",{for:"is_anticipo-c",class:"col-form-label text-lg-end"},"Anticipo: ",-1),xl={class:"d-flex"},kl={key:0,class:"table-responsive m-0"},Nl=l("thead",{class:"table-light"},[l("th",null,"ANTICIPOS"),l("th")],-1),Cl=l("td",null,null,-1),Vl=l("label",{for:"FB",class:"col-form-label text-lg-end"},"Serie: ",-1),Fl=l("option",{value:"FF01"},"FF01",-1),Dl=l("label",{for:"type-nota-electronica",class:"col-form-label text-lg-end"},"Tipo de Nota: ",-1),El=l("option",{value:"01"},"Anulaci贸n de la operaci贸n",-1),Tl=l("option",{value:"02"},"Anulaci贸n por error en el RUC",-1),Sl=l("option",{value:"03"},"Correcci贸n por error en la descripci贸n",-1),Ul=l("option",{value:"04"},"Descuento global",-1),Il=l("option",{value:"05"},"Descuento por 铆tem",-1),wl=l("option",{value:"06"},"Devoluci贸n total",-1),$l=l("option",{value:"07"},"Devoluci贸n por 铆tem",-1),Ol=l("option",{value:"12"},"Ajustes afectos al IVAP",-1),Pl=l("label",{for:"type-nota-electronica",class:"col-form-label text-lg-end"},"Tipo de Nota: ",-1),Ll=l("option",{value:"01"},"Intereses por mora",-1),Al=l("option",{value:"02"},"Aumento en el valor",-1),Bl=l("option",{value:"03"},"Penalidades/ otros conceptos",-1),Rl=l("label",{for:"description-motivo",class:"col-form-label text-lg-end"},"Descripci贸n Motivo: ",-1),ql=l("label",{for:"description-motivo",class:"col-form-label text-lg-end"},"Descripci贸n Motivo: ",-1),Gl={class:"table-responsive m-0"},Ml={class:"table datatable"},jl=l("thead",{class:"table-light"},[l("tr",null,[l("th",null,"Id"),l("th",null,"Producto"),l("th",null,"Unidad"),l("th",null,"Cantidad"),l("th",null,"Precio Base"),l("th",null,"Igv"),l("th",null,"Descuento"),l("th",null,"Precio Final"),l("th",null,"SubTotal"),l("th",null,"Acci贸n")])],-1),Hl={key:0},zl={key:1},Xl=l("i",{class:"far fa-edit"},null,-1),Jl=l("i",{class:"fas fa-prescription-bottle"},null,-1),Ql={style:{width:"90%"}},Kl=l("td",null,"IGV",-1),Wl={key:0},Yl=l("td",null,"ISC",-1),Zl=l("td",null,"Descuento",-1),et={key:1},lt=l("td",null,"Icbper Total",-1),tt={key:2},at=l("td",null,"Anticipo",-1),ot=l("td",null,"SubTotal",-1),ut={key:3},nt=l("td",null,"Percepci贸n",-1),st=l("td",null,"Total",-1),it={key:4},ct=l("td",null,"Retenci贸n",-1),dt={key:5},rt=l("td",null,"Detracci贸n",-1),vt=l("i",{class:"far fa-plus-square ml-3"},null,-1),_t=l("label",{for:"name-product",class:"col-form-label text-lg-end"},"Producto: ",-1),pt=l("label",{for:"name-price-base",class:"col-form-label text-lg-end"},"Precio Base: ",-1),ft=l("label",{for:"name-cantidad",class:"col-form-label text-lg-end"},"Cantidad: ",-1),mt=l("label",{for:"name-discount",class:"col-form-label text-lg-end"},"Precio Final: (Descuento X Item)",-1),bt={class:"modal-footer"},Vt=Me({__name:"nota",setup(gt){const ye=n(""),Te=He(),F=n("07"),U=n("01"),he=n(1),P=n(0),le=n("0000000000"),te=n(""),ae=n([]),E=n(void 0),oe=n(null),h=n(0),I=n(0),Se=n(""),de=n(null),re=n("FF01"),y=n(void 0);n(null),n(10),n(0),n(0);const xe=n(0),i=n([]),b=n("S/."),A=n(0),ue=n(0),ke=n(1),ve=n([]),_e=n(""),Ne=n(0),z=n(0),B=n(0),R=n(0),Ue=n(0),ne=n(0),se=n(0),X=n(0),J=n(0),Q=n(0),pe=n([]),c=n(null),Ce=n("success"),q=n(0),T=n(0),Ie=n(0),G=n(0),V=n(),M=n(!1),K=n([]),W=n(0),fe=n(0),j=n(""),we=()=>{var a;if(y.value){if(((a=y.value)==null?void 0:a.include_igv)==2&&y.value.percentage_isc>0){let e=y.value.percentage_isc*.01;const r=1+e+(1+e)*.18;return Number((y.value.price_general/r).toFixed(6))}return y.value.include_igv==1?y.value.price_general:Number((y.value.price_general/1.18).toFixed(6))}return 0},$e=()=>{var a;if(y.value){if(((a=y.value)==null?void 0:a.include_igv)==2&&y.value.percentage_isc>0){let e=y.value.percentage_isc*.01;const r=1+e+(1+e)*.18;return Number((y.value.price_company/r).toFixed(6))}return y.value.include_igv==1?y.value.price_company:Number((y.value.price_company/1.18).toFixed(6))}return 0},Oe=async()=>{var a,e,r,m;try{const _=await ge.get("sales/config");console.log(_),te.value=_.data.today,le.value=_.data.n_transaction,ae.value.length==0&&(ae.value=_.data.clients.data,_.data.product_notes&&(K.value=_.data.product_notes.data),setTimeout(()=>{oe.value=new ul("#n-f-clients")},50)),setTimeout(()=>{oe.value.on("selectr.change",C=>{console.log(C.value),E.value=ae.value.find(v=>v.id==C.value),y.value&&E.value&&(E.value.type_client=="1"?xe.value=we():xe.value=$e())}),Ge()},50)}catch(_){console.log(_),(e=(a=_.response)==null?void 0:a.data)!=null&&e.error&&ye.value.length==0&&(ye.value=(m=(r=_.response)==null?void 0:r.data)==null?void 0:m.error)}},Pe=async()=>{var a,e,r;try{if(!E.value){w.fire("Upps!","Necesitas seleccionar un cliente","error");return}if(i.value.length==0){w.fire("Upps!","Necesitas agregar al menos un producto al detallado","error");return}if(!j.value){w.fire("Upps!","Necesitas describir un motivo","error");return}let m={sale_id:(a=c.value)==null?void 0:a.id,client_id:E.value.id,type_client:E.value.type_client,discount:ue.value,subtotal:B.value,total:R.value,igv:z.value,state_sale:0,state_payment:0,debt:0,paid_out:0,sale_details:i.value,type_payment:0,doc_nota:F.value,retencion_igv:h.value,discount_global:A.value,description:_e.value,serie:re.value,is_exportacion:P.value,currency:b.value,type_nota:U.value,description_motivo:j.value};const _=await ge.post("sunat_nota_seend",m);if(_.data.error){w.fire("Upps!",`(${_.data.error.code}) ${_.data.error.message}`,"error");return}console.log(_),w.fire("Genial!",`${_.data.message}`,"success")}catch(m){if(console.log(m),(e=m.response)!=null&&e.data){w.fire("Upps!",(r=m.response)==null?void 0:r.data.message,"error");return}}},Ve=()=>{E.value=void 0,ue.value=0,B.value=0,R.value=0,z.value=0,he.value=1,Ne.value=0,_e.value="",i.value=[],ve.value=[],ke.value=1,oe.value.setValue(""),L(),h.value=0,X.value=0,J.value=0,Q.value=0,A.value=0,I.value=0,Se.value="",de.value=0},Le=a=>{M.value=!0,V.value=a,q.value=V.value.price_base,T.value=V.value.quantity},Ae=async()=>{var H,O,ie,o,g,D,Z;if(!T.value||T.value==0){w.fire("Upps!","Necesitas digitar la cantidad del producto","error");return}if(U.value=="05"&&G.value==0){w.fire("Upps!","Necesitas ingresar el descuento que va tener el producto","error");return}G.value>0&&(q.value=Number((G.value/1.18).toFixed(5)));let a=Ie.value*T.value,e=Number((H=V.value)==null?void 0:H.tip_afe_igv),r=T.value*q.value-a,m=((O=V.value)==null?void 0:O.product.is_ivap)==2?.04*r:0,_=.18;[10,11].includes(e)||(_=0);let C=0;((ie=V.value)==null?void 0:ie.product.is_ivap)==1?C=r*_:C=m;let v=((o=V.value)==null?void 0:o.product.percentage_isc)??0,S=r*v*.01;(((g=V.value)==null?void 0:g.product.percentage_isc)??0)>0&&(C=(r+S)*_);let $=Number(((r+C+S)/T.value).toFixed(2)),Y=((D=V.value)==null?void 0:D.product.is_icbper)==2?.5*T.value:0,k=i.value.findIndex(ee=>{var De;return ee.id==((De=V.value)==null?void 0:De.id)});k!=-1&&(i.value[k].price_base=q.value,i.value[k].price_final=$,i.value[k].discount=a,i.value[k].quantity=T.value,i.value[k].igv=Number(C.toFixed(2)),i.value[k].subtotal=Number(r.toFixed(2)),i.value[k].tip_afe_igv=e,i.value[k].per_icbper=((Z=V.value)==null?void 0:Z.product.is_icbper)==1?.5:0,i.value[k].icbper=Y,i.value[k].percentage_isc=v,i.value[k].isc=S,M.value=!1,L())},Be=a=>{i.value.splice(a,1),L()},Re=()=>Number((z.value-fe.value).toFixed(6)),qe=()=>Number((B.value-W.value).toFixed(6)),Fe=()=>Number((R.value+ne.value+se.value+Q.value-(J.value+X.value+fe.value+W.value)).toFixed(5));ce(F,a=>{if(U.value="01",a=="08"){i.value=[];let e=K.value.find(r=>r.title.toLocaleLowerCase().indexOf("inter茅s por mora")!=-1);e&&i.value.push({product:e,unidad_medida:e.unidad_medida,price_base:0,price_final:0,quantity:1,discount:0,igv:0,subtotal:0,tip_afe_igv:10,per_icbper:0,icbper:0,percentage_isc:0,isc:0})}else c.value&&(i.value=c.value.sale_details);L()}),ce(U,a=>{if(G.value=0,F.value=="07")if(a=="04"){i.value=[];let e=K.value.find(r=>r.title.toLocaleLowerCase().indexOf("descuento global")!=-1);e&&i.value.push({product:e,unidad_medida:e.unidad_medida,price_base:0,price_final:0,quantity:1,discount:0,igv:0,subtotal:0,tip_afe_igv:10,per_icbper:0,icbper:0,percentage_isc:0,isc:0})}else a=="05"?i.value=i.value.map(e=>(e.price_base=0,e.price_final=0,e.quantity=1,e.discount=0,e.igv=0,e.subtotal=0,e.tip_afe_igv=10,e.per_icbper=0,e.icbper=0,e.percentage_isc=0,e.isc=0,e)):c.value&&(i.value=c.value.sale_details);else{i.value=[];let e=null;switch(a){case"01":e=K.value.find(r=>r.title.toLocaleLowerCase().indexOf("inter茅s por mora")!=-1);break;case"02":i.value=c.value?c.value.sale_details:[];break;case"03":e=K.value.find(r=>r.title.toLocaleLowerCase().indexOf("penalidades")!=-1);break}e&&i.value.push({product:e,unidad_medida:e.unidad_medida,price_base:0,price_final:0,quantity:1,discount:0,igv:0,subtotal:0,tip_afe_igv:10,per_icbper:0,icbper:0,percentage_isc:0,isc:0})}L()}),ce(h,a=>{L()}),ce(P,a=>{a==0?(b.value="S/.",Ve()):(b.value="$. ",Ve())});const L=()=>{switch(z.value=Number(i.value.filter(a=>![11].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.igv,0).toFixed(5)),W.value=0,fe.value=0,A.value>0&&(W.value=W.value+A.value),ue.value=Number(i.value.filter(a=>![11].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.discount,0).toFixed(5)),B.value=Number(i.value.filter(a=>![11].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.subtotal,0).toFixed(5)),Ue.value=Number(i.value.filter(a=>[17].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.igv,0).toFixed(5)),ne.value=Number(i.value.filter(a=>![11].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.icbper,0).toFixed(5)),se.value=Number(i.value.filter(a=>![11].includes(Number(a.tip_afe_igv))).reduce((a,e)=>a+e.isc,0).toFixed(5)),R.value=Number((B.value+z.value).toFixed(5)),Ne.value=Number(ve.value.reduce((a,e)=>a+e.amount,0).toFixed(5)),X.value=0,J.value=0,Q.value=0,h.value){case 1:X.value=Number((R.value*.03).toFixed(5));break;case 2:J.value=Number((R.value*.04).toFixed(5));break;case 3:Q.value=Number((B.value*.04).toFixed(5));break}Fe()},Ge=async()=>{try{const a=await ge.get("sales/"+Te.params.id);if(console.log(a.data),a.data.code!=200){w.fire("Upps!",a.data.message,"error");return}else a.data.sale&&(c.value=a.data.sale,E.value=c.value.client,oe.value.setValue(c.value.client.id),i.value=c.value.sale_details,ve.value=c.value.payments,ke.value=c.value.type_payment,_e.value=c.value.description,he.value=c.value.state_sale,h.value=c.value.retencion_igv,A.value=c.value.discount_global,P.value=c.value.is_exportacion,b.value=c.value.currency,te.value=c.value.created_at_format,le.value=c.value.n_transaction,c.value.sales_anticipos&&(pe.value=c.value.sales_anticipos,I.value=1),setTimeout(()=>{L()},25))}catch(a){console.log(a)}};return je(()=>{Oe()}),(a,e)=>{const r=Qe,m=Ke,_=Je,C=Xe,v=ze,S=We,$=Ze,Y=el,k=ll,H=Ye,O=tl,ie=al;return d(),N(ol,null,{default:t(()=>[nl,u(S,{class:"mt-2"},{default:t(()=>[u(v,{lg:"5",md:"5"},{default:t(()=>[u(C,{"no-body":"",class:Ee({"border-sale":F.value=="07"})},{default:t(()=>[u(_,{class:"text-center"},{default:t(()=>[sl,u(r,{class:"py-1"},{default:t(()=>[f("NOTA DE CREDITO")]),_:1}),u(m,{name:"doc_nota",onClick:e[0]||(e[0]=o=>F.value="07"),value:"07",checked:""})]),_:1})]),_:1},8,["class"])]),_:1}),u(v,{lg:"2",md:"2"}),u(v,{lg:"5",md:"5"},{default:t(()=>[u(C,{"no-body":"",class:Ee({"border-sale":F.value=="08"})},{default:t(()=>[u(_,{class:"text-center"},{default:t(()=>[il,u(r,{class:"py-1"},{default:t(()=>[f("NOTA DEBITO")]),_:1}),u(m,{name:"doc_nota",onClick:e[1]||(e[1]=o=>F.value="08"),value:"08"})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),u(C,{"no-body":""},{default:t(()=>[u(_,null,{default:t(()=>[u(r,null,{default:t(()=>[f(" Datos Generales")]),_:1})]),_:1}),u(H,{class:"pt-0"},{default:t(()=>[u(S,null,{default:t(()=>[u(v,{lg:"2"},{default:t(()=>{var o,g;return[cl,l("div",dl,[((o=c.value)==null?void 0:o.is_exportacion)==0?(d(),N(m,{key:0,name:"is_exportacion-c",onClick:e[2]||(e[2]=D=>P.value=0),value:"0",checked:P.value==0},{default:t(()=>[f("No")]),_:1},8,["checked"])):p("",!0),f(" "+s(" ")+" "),((g=c.value)==null?void 0:g.is_exportacion)==1?(d(),N(m,{key:1,name:"is_exportacion-c",class:"mx-2",onClick:e[3]||(e[3]=D=>P.value=1),value:"1",checked:P.value==1},{default:t(()=>[f("Si")]),_:1},8,["checked"])):p("",!0),f(" "+s(" "))])]}),_:1}),u(v,{lg:"2",md:"3"},{default:t(()=>[rl,u($,{type:"text",id:"n-operation",modelValue:le.value,"onUpdate:modelValue":e[4]||(e[4]=o=>le.value=o),placeholder:"F-001"},null,8,["modelValue"])]),_:1}),u(v,{lg:"2",md:"3"},{default:t(()=>[vl,u($,{type:"date",id:"n-f-emision",modelValue:te.value,"onUpdate:modelValue":e[5]||(e[5]=o=>te.value=o),placeholder:"F-001"},null,8,["modelValue"])]),_:1}),u(v,{lg:"5",md:"5"},{default:t(()=>[_l,l("select",pl,[fl,(d(!0),x(be,null,me(ae.value,(o,g)=>(d(),x("option",{key:g,value:o.id},s(o.full_name),9,ml))),128))]),E.value?(d(),x("b",bl,s(E.value.type_client==1?"CLIENTE FINAL":"CLIENTE EMPRESA"),1)):p("",!0)]),_:1}),u(v,{lg:"2"},{default:t(()=>{var o,g,D,Z;return[gl,l("div",yl,[((o=c.value)==null?void 0:o.retencion_igv)==0?(d(),N(m,{key:0,name:"retencion-igv-c",onClick:e[6]||(e[6]=ee=>h.value=0),value:"0",checked:h.value==0},{default:t(()=>[f("Ninguno")]),_:1},8,["checked"])):p("",!0),f(" "+s(" ")+" "),((g=c.value)==null?void 0:g.retencion_igv)==1?(d(),N(m,{key:1,name:"retencion-igv-c",class:"mx-2",onClick:e[7]||(e[7]=ee=>h.value=1),value:"1",checked:h.value==1},{default:t(()=>[f("Retenci贸n")]),_:1},8,["checked"])):p("",!0),f(" "+s(" ")+" "),((D=c.value)==null?void 0:D.retencion_igv)==2?(d(),N(m,{key:2,name:"retencion-igv-c",class:"mx-2",onClick:e[8]||(e[8]=ee=>h.value=2),value:"2",checked:h.value==2},{default:t(()=>[f("Detracci贸n")]),_:1},8,["checked"])):p("",!0),f(" "+s(" ")+" "),((Z=c.value)==null?void 0:Z.retencion_igv)==3?(d(),N(m,{key:3,name:"retencion-igv-c",class:"mx-2",onClick:e[9]||(e[9]=ee=>h.value=3),value:"3",checked:h.value==3},{default:t(()=>[f("Percepci贸n")]),_:1},8,["checked"])):p("",!0)])]}),_:1}),u(v,{lg:"1"},{default:t(()=>{var o,g;return[hl,l("div",xl,[(o=c.value)!=null&&o.ce_anticipo?p("",!0):(d(),N(m,{key:0,name:"is_anticipo-c",onClick:e[10]||(e[10]=D=>I.value=0),value:"0",checked:I.value==0},{default:t(()=>[f("No")]),_:1},8,["checked"])),f(" "+s(" ")+" "),(g=c.value)!=null&&g.ce_anticipo?(d(),N(m,{key:1,name:"is_anticipo-c",class:"mx-2",onClick:e[11]||(e[11]=D=>I.value=1),value:"1",checked:I.value==1},{default:t(()=>[f("Si")]),_:1},8,["checked"])):p("",!0),f(" "+s(" "))])]}),_:1}),I.value==1?(d(),N(v,{key:0,lg:"2"},{default:t(()=>[pe.value.length>0?(d(),x("div",kl,[l("table",null,[Nl,l("tbody",null,[(d(!0),x(be,null,me(pe.value,(o,g)=>(d(),x("tr",{key:g},[l("td",null,s(o.n_operacion),1),Cl]))),128))])])])):p("",!0)]),_:1})):p("",!0),u(v,{lg:"2"},{default:t(()=>[Vl,u(Y,{id:"FB",modelValue:re.value,"onUpdate:modelValue":e[12]||(e[12]=o=>re.value=o)},{default:t(()=>[Fl]),_:1},8,["modelValue"])]),_:1}),u(v,{lg:"4"},{default:t(()=>[u(S,null,{default:t(()=>[F.value=="07"?(d(),N(v,{key:0,lg:"12"},{default:t(()=>[Dl,u(Y,{id:"type-nota-electronica",modelValue:U.value,"onUpdate:modelValue":e[13]||(e[13]=o=>U.value=o)},{default:t(()=>[El,Tl,Sl,Ul,Il,wl,$l,Ol]),_:1},8,["modelValue"])]),_:1})):p("",!0),F.value=="08"?(d(),N(v,{key:1,lg:"12"},{default:t(()=>[Pl,u(Y,{id:"type-nota-electronica",modelValue:U.value,"onUpdate:modelValue":e[14]||(e[14]=o=>U.value=o)},{default:t(()=>[Ll,Al,Bl]),_:1},8,["modelValue"])]),_:1})):p("",!0),I.value==1?(d(),N(v,{key:2,lg:"12"},{default:t(()=>[Rl,u(k,{type:"textarea",modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=o=>j.value=o),rows:"3",id:"description-motivo"},null,8,["modelValue"])]),_:1})):p("",!0)]),_:1})]),_:1}),I.value!=1?(d(),N(v,{key:1,lg:"3",md:"3"},{default:t(()=>[ql,u(k,{type:"textarea",modelValue:j.value,"onUpdate:modelValue":e[16]||(e[16]=o=>j.value=o),rows:"3",id:"description-motivo"},null,8,["modelValue"])]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),u(C,{"no-body":""},{default:t(()=>[u(_,null,{default:t(()=>[u(r,null,{default:t(()=>[f(" Detalle de la Venta")]),_:1})]),_:1}),u(H,{class:"pt-0"},{default:t(()=>[u(S,null,{default:t(()=>[u(v,{lg:"12"},{default:t(()=>[l("div",Gl,[l("table",Ml,[jl,l("tbody",null,[(d(!0),x(be,null,me(i.value,(o,g)=>(d(),x("tr",{key:g},[l("td",null,s(g+1),1),l("td",null,s(o.product.title),1),l("td",null,s(o.unidad_medida),1),l("td",null,s(o.quantity),1),l("td",null,s(b.value)+" "+s(o.price_base),1),l("td",null,s(b.value)+" "+s((o.igv+o.icbper).toFixed(2)),1),l("td",null,s(b.value)+" "+s(o.discount),1),l("td",null,s(b.value)+" "+s(o.price_final),1),[11].includes(o.tip_afe_igv)?p("",!0):(d(),x("td",Hl,s(b.value)+" "+s(o.subtotal),1)),[11].includes(o.tip_afe_igv)?(d(),x("td",zl,s(b.value)+" 0 ",1)):p("",!0),l("td",null,[u(O,{type:"button",variant:"primary",onClick:D=>Le(o)},{default:t(()=>[Xl]),_:2},1032,["onClick"]),u(O,{type:"button",variant:"danger",onClick:D=>Be(g)},{default:t(()=>[Jl]),_:2},1032,["onClick"])])]))),128))])])])]),_:1}),u(v,{lg:"6",class:"mt-2"},{default:t(()=>[l("table",Ql,[l("tr",null,[Kl,l("td",null,s(b.value)+" "+s(Re()),1)]),se.value>0?(d(),x("tr",Wl,[Yl,l("td",null,s(b.value)+" "+s(se.value),1)])):p("",!0),l("tr",null,[Zl,l("td",null,s(b.value)+" "+s(ue.value+A.value),1)]),ne.value>0?(d(),x("tr",et,[lt,l("td",null,s(b.value)+" "+s(ne.value),1)])):p("",!0),de.value?(d(),x("tr",tt,[at,l("td",null,s(b.value)+" "+s(de.value.subtotal),1)])):p("",!0),l("tr",null,[ot,l("td",null,s(b.value)+" "+s(qe()),1)]),h.value==3?(d(),x("tr",ut,[nt,l("td",null,s(b.value)+" "+s(Q.value),1)])):p("",!0),l("tr",null,[st,l("td",null,s(b.value)+" "+s(Fe()),1)]),h.value==1?(d(),x("tr",it,[ct,l("td",null,s(b.value)+" "+s(X.value),1)])):p("",!0),h.value==2?(d(),x("tr",dt,[rt,l("td",null,s(b.value)+" "+s(J.value),1)])):p("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),u(C,{"no-body":""},{default:t(()=>[u(H,null,{default:t(()=>[u(S,{class:"align-items-center justify-content-end"},{default:t(()=>[u(v,{lg:"3",md:"3"},{default:t(()=>[u(O,{type:"button",variant:"primary",onClick:e[17]||(e[17]=o=>Pe())},{default:t(()=>[vt,f(" Generar "+s(F.value=="07"?"Nota de Credito":"Nota de Debito"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),u(ie,{modelValue:M.value,"onUpdate:modelValue":e[23]||(e[23]=o=>M.value=o),title:` ${V.value?"Edici贸n":"Registro"} del Detallado`,"header-class":`bg-${Ce.value}`,"title-class":"m-0 text-white","ok-variant":Ce.value,"hide-footer":"",centered:"",size:"md"},{default:t(()=>[u(S,null,{default:t(()=>[u(v,{lg:"10"},{default:t(()=>{var o;return[_t,u($,{type:"text",id:"name-product",disabled:"",placeholder:"Example: Producto",value:(o=V.value)==null?void 0:o.product.title},null,8,["value"])]}),_:1}),u(v,{lg:"6"},{default:t(()=>[pt,u($,{type:"number",id:"name-price-base",modelValue:q.value,"onUpdate:modelValue":e[18]||(e[18]=o=>q.value=o),placeholder:"Example: 0"},null,8,["modelValue"])]),_:1}),u(v,{lg:"6"},{default:t(()=>[ft,u($,{type:"number",id:"name-cantidad",modelValue:T.value,"onUpdate:modelValue":e[19]||(e[19]=o=>T.value=o),placeholder:"Example: 0"},null,8,["modelValue"])]),_:1}),F.value=="07"&&U.value=="05"?(d(),N(v,{key:0,lg:"6"},{default:t(()=>[mt,u($,{type:"number",id:"name-discount",modelValue:G.value,"onUpdate:modelValue":e[20]||(e[20]=o=>G.value=o),placeholder:"Example: 0"},null,8,["modelValue"])]),_:1})):p("",!0),u(v,{lg:"12",class:"mt-3"},{default:t(()=>[l("div",bt,[u(O,{type:"button",variant:"secondary",onClick:e[21]||(e[21]=o=>M.value=!M.value)},{default:t(()=>[f(" Cerrar ")]),_:1}),u(O,{type:"button",variant:"primary",onClick:e[22]||(e[22]=o=>Ae())},{default:t(()=>[f(" Editar ")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","title","header-class","ok-variant"])]),_:1})}}});export{Vt as default};
