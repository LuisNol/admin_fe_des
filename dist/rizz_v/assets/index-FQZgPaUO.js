import{h as z,r as s,P as Q,l as W,m as o,q as u,t as l,T as Y,N as Z,L as ee,U as te,J as i,s as ae,y as e,E as le,a7 as oe,B as _,G as B,F as D,a8 as ne,H as d,M as se,x as de,a5 as re,v as ue,D as L,V as M,u as A,af as ce}from"./index-gLb9mm57.js";import{_ as ie}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-t3Qmrl9p.js";import{x as _e,c as pe}from"./logo-cdr-BoRzzDzm.js";import{H as R}from"./http-client-BDz097Pl.js";import"./ProcessingCircleAnimation-CnYI319d.js";const me=e("i",{class:"far fa-plus-square ml-3"},null,-1),ve=["value"],fe=e("label",{for:"motivo_translado-product",class:"col-form-label text-lg-end"},"Motivo de Translado: ",-1),he=e("option",{value:""},"Selec. Motivo",-1),be=e("option",{value:"01"},"Venta",-1),ge=e("option",{value:"02"},"Compra",-1),ke=e("option",{value:"04"},"Traslado entre establecimientos de la misma empresa",-1),Ve=e("option",{value:"08"},"Importaci贸n",-1),ye=e("option",{value:"09"},"Exportaci贸n",-1),xe=e("option",{value:"13"},"Otros",-1),Te=e("option",{value:"14"},"Venta sujeta a confirmaci贸n del comprador",-1),Ce=e("option",{value:"18"},"Traslado emisor itinerante CP",-1),Pe=e("label",{for:"type_transport-product",class:"col-form-label text-lg-end"},"Tipo de Transporte: ",-1),we={class:"d-flex"},Ne=e("small",null,"Fecha de Inicio",-1),Ee=e("small",null,"Fecha de Fin",-1),Ie=e("i",{class:"fas fa-search"},null,-1),Oe=e("i",{class:"fas fa-sync"},null,-1),Ue={class:"table-responsive m-0"},Be={class:"table datatable"},De=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"N掳 de Operaci贸n"),e("th",null,"Cliente"),e("th",null,"Fecha de Emisi贸n"),e("th",null,"Tipo"),e("th",null,"Motivo de Translado"),e("th",null,"Punto de Llegada"),e("th",null,"Peso Total"),e("th",null,"N掳 de Bultos"),e("th",null,"Fac. Elec."),e("th",null,"Acci贸n")])],-1),Le={style:{width:"16px"}},Me={class:"d-flex align-items-center"},Ae={class:"text-nowrap"},Re={class:"d-flex"},Se={key:0},Fe=["href"],Ge=["src"],$e={key:1},qe=["href"],He=["src"],je={class:"d-flex"},Je=["onClick"],Ke=e("i",{class:"fas fa-file-pdf text-secondary fs-22"},null,-1),Xe=[Ke],at=z({__name:"index",setup(ze){const m=s(""),v=s(""),f=s(""),h=s(""),b=s(""),g=s(""),k=s(""),c=s("0"),C=s([]),P=s([]),w=s(5),N=s(0),V=s(1),S=async()=>{try{const n=await R.get("products/config");console.log(n),C.value=n.data.categories}catch(n){console.log(n)}},y=async()=>{try{const n=await R.post("guia/index?page="+V.value,{search_product:m.value,categorie_id:g.value,search:v.value,search_client:f.value,start_date:h.value,end_date:b.value,motivo_translado:k.value,type_transport:c.value});console.log(n),P.value=n.data.guia_remisions.data,N.value=n.data.total,w.value=n.data.pagination}catch(n){console.log(n)}},F=()=>{m.value="",v.value="",f.value="",h.value="",b.value="",k.value="",c.value="0",g.value="",y()},G=n=>{window.open("https://api-fe.avisonline.store/api/guia-remision-pdf/"+n.id,"_blank")},$=n=>{let a="";switch(n){case"01":a="Venta";break;case"02":a="Compra";break;case"04":a="Traslado entre establecimientos de la misma empresa";break;case"08":a="Importaci贸n";break;case"09":a="Exportaci贸n";break;case"13":a="Otros";break;case"14":a="Venta sujeta a confirmaci贸n del comprador";break;case"18":a="Traslado emisor itinerante CP";break}return a};return Q(()=>{y(),S()}),(n,a)=>{const q=te,r=ee,H=ae("router-link"),E=Z,p=le,I=oe,x=ne,O=se,j=Y,J=re,K=de,X=ue,U=ce;return u(),W(ie,null,{default:o(()=>[l(X,{"no-body":""},{default:o(()=>[l(j,null,{default:o(()=>[l(E,{class:"align-items-center justify-content-between"},{default:o(()=>[l(r,{lg:"3"},{default:o(()=>[l(q,null,{default:o(()=>[i(" LISTA DE GUIAS DE REMISION")]),_:1})]),_:1}),l(r,{lg:"3"},{default:o(()=>[l(H,{to:"/guia/register",type:"button",variant:"success"},{default:o(()=>[me,i(" Registrar Nuevo Guia ")]),_:1})]),_:1})]),_:1}),l(E,{class:"align-items-center mt-3"},{default:o(()=>[l(r,{lg:"4",md:"4"},{default:o(()=>[l(p,{type:"text",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),id:"name-product",placeholder:"Buscar por nombre o sku del producto"},null,8,["modelValue"])]),_:1}),l(r,{lg:"3",md:"3"},{default:o(()=>[l(I,{id:"categorie-product",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=t=>g.value=t)},{default:o(()=>[(u(!0),_(D,null,B(C.value,(t,T)=>(u(),_("option",{key:T,value:t.id},d(t.title),9,ve))),128))]),_:1},8,["modelValue"])]),_:1}),l(r,{lg:"2",md:"2"},{default:o(()=>[l(p,{type:"number",modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=t=>v.value=t),id:"n_ventas",placeholder:"Buscar por N掳 de Guia"},null,8,["modelValue"])]),_:1}),l(r,{lg:"3",md:"3"},{default:o(()=>[l(p,{type:"text",modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=t=>f.value=t),id:"n_ventas",placeholder:"Buscar por nombre de cliente"},null,8,["modelValue"])]),_:1}),l(r,{lg:"2",md:"2"},{default:o(()=>[fe,l(I,{id:"n-type_document",modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=t=>k.value=t)},{default:o(()=>[he,be,ge,ke,Ve,ye,xe,Te,Ce]),_:1},8,["modelValue"])]),_:1}),l(r,{lg:"4",md:"4"},{default:o(()=>[Pe,e("div",we,[l(x,{name:"type_transport",onClick:a[5]||(a[5]=t=>c.value="02"),value:"02",checked:c.value=="02"},{default:o(()=>[i("T. Privado")]),_:1},8,["checked"]),i(" "+d(" ")+" "),l(x,{name:"type_transport",onClick:a[6]||(a[6]=t=>c.value="01"),value:"01",class:"mx-1",checked:c.value=="01"},{default:o(()=>[i("T. Publico")]),_:1},8,["checked"]),i(" "+d(" ")+" "),l(x,{name:"type_transport",onClick:a[7]||(a[7]=t=>c.value="0"),value:"0",class:"mx-1",checked:c.value=="0"},{default:o(()=>[i("Ninguno")]),_:1},8,["checked"])])]),_:1}),l(r,{lg:"2",md:"2"},{default:o(()=>[l(p,{type:"date",id:"n-f-start_date",modelValue:h.value,"onUpdate:modelValue":a[8]||(a[8]=t=>h.value=t),placeholder:""},null,8,["modelValue"]),Ne]),_:1}),l(r,{lg:"2",md:"2"},{default:o(()=>[l(p,{type:"date",id:"n-f-end_date",modelValue:b.value,"onUpdate:modelValue":a[9]||(a[9]=t=>b.value=t),placeholder:""},null,8,["modelValue"]),Ee]),_:1}),l(r,{lg:"2",md:"2"},{default:o(()=>[l(O,{type:"button",onClick:y,variant:"success"},{default:o(()=>[Ie]),_:1}),l(O,{type:"button",onClick:F,variant:"dark",class:"mx-2"},{default:o(()=>[Oe]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{class:"pt-0"},{default:o(()=>[e("div",Ue,[e("table",Be,[De,e("tbody",null,[(u(!0),_(D,null,B(P.value,(t,T)=>(u(),_("tr",{key:T},[e("td",Le,d(t.n_operacion??t.id),1),e("td",null,[e("div",Me,[e("span",null,d(t.client.full_name),1)])]),e("td",null,d(t.created_at_format),1),e("td",null,d(t.type_transport=="01"?"TRANSPORTE PUBLICO":"TRANSPORTE PRIVADO"),1),e("td",null,d($(t.motivo_translado)),1),e("td",null,d(t.punto_llegada.region+"/"+t.punto_llegada.provincia+"/"+t.punto_llegada.distrito),1),e("td",null,[e("span",Ae,d(t.total)+" KGM",1)]),e("td",null,d(t.quantity_total),1),e("td",null,[e("div",Re,[t.correlativo?(u(),_("div",Se,[M((u(),_("a",{href:t.xml,target:"_blank"},[e("img",{src:A(_e),width:"45",alt:""},null,8,Ge)],8,Fe)),[[U,"Descargar XML",void 0,{hover:!0,top:!0}]])])):L("",!0),t.correlativo?(u(),_("div",$e,[M((u(),_("a",{href:t.cdr,target:"_blank"},[e("img",{src:A(pe),width:"45",alt:""},null,8,He)],8,qe)),[[U,"Descargar CDR",void 0,{hover:!0,top:!0}]])])):L("",!0)])]),e("td",null,[e("div",je,[e("a",{href:"#",onclick:"return false;",onClick:Qe=>G(t)},Xe,8,Je),i(d(" "))])])]))),128))])])]),l(J,{modelValue:V.value,"onUpdate:modelValue":a[10]||(a[10]=t=>V.value=t),"total-rows":N.value,"per-page":w.value,"prev-text":"Previous","next-text":"Next"},null,8,["modelValue","total-rows","per-page"])]),_:1})]),_:1})]),_:1})}}});export{at as default};
