import{h as qe,r as s,w as _e,_ as Le,l as q,m as a,q as c,y as e,t,L as Me,v as ze,P as Ce,Q as He,R as Je,J as _,a5 as Ke,N as Ye,x as je,D as p,H as n,E as Qe,B as v,G as oe,F as ue,ab as Te,M as Ze,a4 as We,a9 as Xe}from"./index-D8mrUL2h.js";import{_ as el}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Cx4oJ_hT.js";import{S as Ee}from"./selectr.min-DQ9unuhL.js";import{H as xe}from"./http-client-9jyrWv7H.js";import{S as y}from"./sweetalert2-DId3skXs.js";import"./logo-sm-CPlBPHhB.js";const ll=e("div",{class:"d-flex flex-wrap justify-space-between gap-4 mb-6"},[e("div",{class:"d-flex flex-column justify-center"},[e("h4",{class:"text-h4 mb-1"}," üí∞ Add New Sale/Cotizaci√≥n "),e("p",{class:"text-body-1 mb-0"}," Orders placed across your store ")])],-1),tl=e("i",{class:"fas fa-cart-plus fs-18"},null,-1),al=e("i",{class:"fas fa-file-alt fs-18"},null,-1),ol=e("label",{for:"is_exportacion-c",class:"col-form-label text-lg-end"},"Exportaci√≥n: ",-1),ul={class:"d-flex"},nl=e("label",{for:"n-transaction",class:"col-form-label text-lg-end"},"N¬∞ de Venta/Cotizaci√≥n: ",-1),sl=e("label",{for:"n-f-emision",class:"col-form-label text-lg-end"},"Fecha de Emisi√≥n: ",-1),dl=e("label",{for:"n-f-clients",class:"col-form-label text-lg-end"},"Clientes: ",-1),il={id:"n-f-clients"},cl=e("option",{value:""},"Selec. Cliente",-1),rl=["value"],vl={key:0},_l=e("label",{for:"retencion-igv-c",class:"col-form-label text-lg-end"},"Retenciones IGV: ",-1),pl={class:"d-flex"},fl=e("label",{for:"is_anticipo-c",class:"col-form-label text-lg-end"},"Anticipo: ",-1),ml={class:"d-flex"},bl={class:"d-flex align-items-center"},gl=e("label",{for:"n-of-comprobante",class:"col-form-label"},"N¬∞ de Compr. o N¬∞ Venta: ",-1),yl={key:0},hl=e("i",{class:"far fa-plus-square ml-3"},null,-1),kl=e("i",{class:"fas fa-sync ml-3"},null,-1),xl={key:0,class:"table-responsive m-0"},Nl=e("thead",{class:"table-light"},[e("th",null,"ANTICIPOS"),e("th")],-1),Vl=e("i",{class:"las la-trash-alt ml-3"},null,-1),Cl=e("label",{for:"FB",class:"col-form-label text-lg-end"},"Tipo: ",-1),Tl=e("option",{value:"F001"},"F001",-1),El=e("option",{value:"B001"},"B001",-1),Fl={class:"row"},Al={class:"col-12"},Il=e("label",{for:"n-f-products",class:"col-form-label text-lg-end"},"Productos: ",-1),Pl={id:"n-f-products"},Ul=e("option",{value:""},"Selec. Producto",-1),Sl=["value"],$l={key:0,class:"col-12 mt-2"},Ol={key:0},Dl={key:1},wl=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),Rl=e("option",{value:"10"},"Gravado - Operaci√≥n Onerosa",-1),Bl=e("option",{value:"20"},"Exonerado - Operaci√≥n Onerosa",-1),Gl=e("option",{value:"30"},"Inafecta - Operaci√≥n Onerosa",-1),ql=e("option",{value:"11"},"Gravado ‚Äì Retiro por premio",-1),Ll=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),Ml=e("option",{value:"40"},"Exportaci√≥n de Bienes o Servicios",-1),zl=e("label",{for:"n-f-type-operation",class:"col-form-label text-lg-end"},"Tipo de Operaci√≥n: ",-1),Hl=e("option",{value:"17"},"Gravado - IVAP",-1),Jl=e("label",{for:"n-f-discount",class:"col-form-label text-lg-end"},"Descuento: ",-1),Kl=e("label",{for:"n-f-cantidad",class:"col-form-label text-lg-end"},"Cantidad: ",-1),Yl=e("label",{for:"n-f-precio-base",class:"col-form-label text-lg-end"},"Precio Base: ",-1),jl=e("i",{class:"far fa-plus-square ml-3"},null,-1),Ql={class:"table-responsive m-0"},Zl={class:"table datatable"},Wl=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Id"),e("th",null,"Producto"),e("th",null,"Unidad"),e("th",null,"Cantidad"),e("th",null,"Precio Base"),e("th",null,"Igv"),e("th",null,"Descuento"),e("th",null,"Precio Final"),e("th",null,"SubTotal"),e("th",null,"Acci√≥n")])],-1),Xl={key:0},et={key:1},lt=e("i",{class:"fas fa-prescription-bottle"},null,-1),tt=e("label",{for:"n-discount-global",class:"col-form-label text-lg-end"},"Descuento Global: ",-1),at={style:{width:"90%"}},ot=e("td",null,"IGV",-1),ut=e("td",null,"SubTotal",-1),nt=e("td",null,"Total",-1),st={key:0},dt=e("td",null,"Retenci√≥n",-1),it={key:1},ct=e("td",null,"Detracci√≥n",-1),rt={key:2},vt=e("td",null,"Percepci√≥n",-1),_t={key:3},pt=e("td",null,"Total Anticipo",-1),ft={key:4},mt=e("td",null,"Ivap Total",-1),bt={key:5},gt=e("td",null,"Icbper Total",-1),yt={key:6},ht=e("td",null,"Isc Total",-1),kt=e("td",null,"Descuento",-1),xt=e("label",{for:"type-pay-c",class:"col-form-label text-lg-end"},"Tipo: ",-1),Nt={class:"d-flex"},Vt=e("label",{for:"n-f-method-payment",class:"col-form-label text-lg-end"},"Metodo de Pago: ",-1),Ct=e("option",{value:"EFECTIVO"},"EFECTIVO",-1),Tt=e("option",{value:"TRANSFERENCIA"},"TRANSFERENCIA",-1),Et=e("option",{value:"YAPE"},"YAPE",-1),Ft=e("option",{value:"PLIN"},"PLIN",-1),At=e("option",{value:"TARJETA DE CREDITO"},"TARJETA DE CREDITO",-1),It=e("label",{for:"n-f-amount",class:"col-form-label text-lg-end"},"Monto: ",-1),Pt=e("label",{for:"n-f-payment",class:"col-form-label text-lg-end"},"Fecha de Pago: ",-1),Ut=e("label",{class:"col-form-label text-lg-end"},"Agregar: ",-1),St=e("i",{class:"far fa-plus-square ml-3"},null,-1),$t={class:"table-responsive m-0"},Ot={class:"table datatable"},Dt={class:"table-light"},wt=e("th",null,"Id",-1),Rt=e("th",null,"Metodo de Pago",-1),Bt=e("th",null,"Monto",-1),Gt={key:0},qt=e("th",null,"Acci√≥n",-1),Lt={key:0},Mt=e("i",{class:"fas fa-prescription-bottle"},null,-1),zt=e("label",{for:"description-product",class:"col-form-label text-lg-end"},"Descripci√≥n: ",-1),Ht=e("i",{class:"far fa-plus-square ml-3"},null,-1),Xt=qe({__name:"register",setup(Jt){const F=s(1),A=s(0),pe=s("0000000000"),fe=s(""),me=s([]),x=s(void 0),be=s(null),V=s(0),H=s(0),J=s(""),L=s(null),ge=s("F001"),ne=s([]),d=s(void 0),ye=s(null),h=s(10),se=s(0),U=s(0),N=s(0),k=s([]),f=s("S/."),$=s(0),de=s(0),C=s(1),O=s(0),K=s(""),D=s([]),ie=s(""),Y=s("EFECTIVO"),w=s(0),le=s(0),j=s(0),Q=s(0),he=s(0),ce=s(0),re=s(0),Z=s(0),W=s(0),X=s(0),M=s([]),R=s(0),z=s(0),ee=s(0),te=()=>{var u;if(d.value){if(((u=d.value)==null?void 0:u.include_igv)==2&&d.value.percentage_isc>0){let l=d.value.percentage_isc*.01;const r=1+l+(1+l)*.18;return Number((d.value.price_general/r).toFixed(6))}return d.value.include_igv==1?d.value.price_general:Number((d.value.price_general/1.18).toFixed(6))}return 0},ke=()=>{var u;if(d.value){if(((u=d.value)==null?void 0:u.include_igv)==2&&d.value.percentage_isc>0){let l=d.value.percentage_isc*.01;const r=1+l+(1+l)*.18;return Number((d.value.price_company/r).toFixed(6))}return d.value.include_igv==1?d.value.price_company:Number((d.value.price_company/1.18).toFixed(6))}return 0},Ne=async()=>{try{const u=await xe.get("sales/config");console.log(u),fe.value=u.data.today,pe.value=u.data.n_transaction,ne.value.length==0&&(ne.value=u.data.products.data,me.value=u.data.clients.data,setTimeout(()=>{be.value=new Ee("#n-f-clients"),ye.value=new Ee("#n-f-products")},50)),setTimeout(()=>{be.value.on("selectr.change",l=>{console.log(l.value),x.value=me.value.find(r=>r.id==l.value),d.value&&x.value&&(x.value.type_client=="1"?N.value=te():N.value=ke())}),ye.value.on("selectr.change",l=>{console.log(l.value),d.value=ne.value.find(r=>r.id==l.value),d.value&&(d.value.is_ivap==2?h.value=17:h.value=10,x.value?x.value.type_client=="1"?N.value=te():N.value=ke():N.value=te())})},50)}catch(u){console.log(u)}},Fe=async()=>{var u,l;try{if(!x.value){y.fire("Upps!","Necesitas seleccionar un cliente","error");return}if(k.value.length==0){y.fire("Upps!","Necesitas agregar al menos un producto al detallado","error");return}if(F.value==1&&D.value.length==0&&B()>0){y.fire("Upps!","Necesitas agregar un pago a la venta","error");return}let r=1;F.value==1&&(w.value!=B()&&(r=2),w.value==B()&&(r=3));let m={client_id:x.value.id,type_client:x.value.type_client,discount:de.value,subtotal:j.value,total:Q.value,igv:le.value,state_sale:F.value,state_payment:r,debt:B()-w.value,paid_out:w.value,sale_details:k.value,type_payment:C.value,payments:D.value,retencion_igv:V.value,discount_global:$.value,description:ie.value,serie:ge.value,amount_anticipo:R.value>0?R.value:null,n_comprobante_anticipo:null,sales_anticipos:M.value.length>0?M.value:null,igv_discount_general:ee.value,is_exportacion:A.value,currency:f.value};const b=await xe.post("sales",m);if(b.data.error){y.fire("Upps!",b.data.error.message,"error");return}b.data.code==200&&y.fire("Genial!",b.data.message,"success"),Ae(),Ne(),console.log(b)}catch(r){if(console.log(r),(u=r.response)!=null&&u.data){y.fire("Upps!",(l=r.response)==null?void 0:l.data.message,"error");return}}},Ae=()=>{x.value=void 0,de.value=0,j.value=0,Q.value=0,le.value=0,F.value=1,w.value=0,ie.value="",k.value=[],D.value=[],C.value=1,be.value.setValue(""),I(),V.value=0,Z.value=0,W.value=0,X.value=0,$.value=0,H.value=0,J.value="",L.value=0},Ie=async()=>{var u,l;try{const r=await xe.get("sales/search_sale/"+J.value);console.log(r),r.data.code==403?(y.fire("Upps!",r.data.message,"warning"),J.value=""):(L.value=r.data.sale,y.fire("Genial!","Se ha encontrado la venta #"+L.value.id,"success"))}catch(r){if(console.log(r),(u=r.response)!=null&&u.data){y.fire("Upps!",(l=r.response)==null?void 0:l.data.message,"error");return}}},Pe=()=>{M.value.push(L.value),Ve(),I()},Ve=()=>{L.value=null,J.value=""},Ue=u=>{M.value.splice(u,1)},Se=()=>{if(!d.value){y.fire("Upps!","Necesitas seleccionar un producto","error");return}if(U.value==0){y.fire("Upps!","Necesitas digitar una cantidad","error");return}let u=se.value*U.value,l=U.value*N.value-u,r=d.value.is_ivap==2?l*.04:0,m=.18;[10,11].includes(Number(h.value))||(m=0);let b=0,S=d.value.percentage_isc,i=l*S*.01;d.value.is_ivap==2?b=r:b=(l+i)*m;let T=Number(((l+b+i)/U.value).toFixed(5)),E=d.value.is_icbper==2?.5*U.value:0;k.value.unshift({product:d.value,unidad_medida:d.value.unidad_medida,price_base:N.value,price_final:T,quantity:U.value,discount:u,igv:b,subtotal:l,per_icbper:d.value.is_icbper==2?.5:0,icbper:E,tip_afe_igv:h.value,percentage_isc:S,isc:i}),console.log(k.value),I(),$e()},$e=()=>{ye.value.setValue(""),d.value=void 0,N.value=0,U.value=0,se.value=0,h.value=10},Oe=u=>{k.value.splice(u,1),I()},I=()=>{switch(le.value=Number(k.value.filter(u=>![11].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.igv,0).toFixed(5)),z.value=0,ee.value=0,$.value>0&&(z.value=z.value+$.value),de.value=Number(k.value.filter(u=>![11].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.discount,0).toFixed(5)),j.value=Number(k.value.filter(u=>![11].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.subtotal,0).toFixed(5)),he.value=Number(k.value.filter(u=>[17].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.igv,0).toFixed(5)),ce.value=Number(k.value.filter(u=>![11].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.icbper,0).toFixed(5)),re.value=Number(k.value.filter(u=>![11].includes(Number(u.tip_afe_igv))).reduce((u,l)=>u+l.isc,0).toFixed(5)),Q.value=Number((j.value+le.value).toFixed(5)),w.value=Number(D.value.reduce((u,l)=>u+l.amount,0).toFixed(5)),R.value=Number(M.value.reduce((u,l)=>u+Number(l.subtotal),0).toFixed(2)),R.value>0&&(z.value=z.value+R.value,ee.value=Number((R.value*.18).toFixed(2))),Z.value=0,W.value=0,X.value=0,V.value){case 1:Z.value=Number((Q.value*.03).toFixed(5));break;case 2:W.value=Number((Q.value*.04).toFixed(5));break;case 3:X.value=Number((j.value*.04).toFixed(5));break}B()},De=()=>Number((le.value-ee.value).toFixed(6)),we=()=>Number((j.value-z.value).toFixed(6)),B=()=>Number((Q.value+ce.value+re.value+X.value-(W.value+Z.value+ee.value+z.value)).toFixed(5)),Re=()=>{if(!Y.value){y.fire("Upps!","Necesitas seleccionar un metodo de pago","error");return}if(O.value<=0){y.fire("Upps!","Necesitas ingresar un monto de pago","error");return}if(C.value==2&&!K.value){y.fire("Upps!","Necesitas seleccionar una fecha de pago","error");return}if(B()<w.value+O.value){y.fire("Upps!","No puedes agregar mas pagos, porque supera al total de la venta","error");return}if(C.value==1&&B()>w.value+O.value){y.fire("Upps!","Necesitas ponerle un monto que sea igual al total de la venta, porque es Al contado","error");return}D.value.unshift({method_payment:Y.value,amount:O.value,date_payment:K.value}),setTimeout(()=>{Y.value="EFECTIVO",O.value=0,K.value="",I()},25)},Be=u=>{D.value.splice(u,1),I()};return _e(A,u=>{u==1?f.value="$. ":f.value="S/. ",k.value=[],I(),$.value=0}),_e(h,u=>{Number(u)==11||d.value&&(x.value?x.value.type_client=="1"?N.value=te():N.value=ke():N.value=te())}),_e(V,u=>{I()}),_e(C,u=>{D.value=[],setTimeout(()=>{Y.value="EFECTIVO",O.value=0,K.value="",I()},25)}),Le(()=>{Ne()}),(u,l)=>{const r=Je,m=Ke,b=He,S=ze,i=Me,T=Ye,E=Qe,G=Ze,ae=We,ve=je,Ge=Xe;return c(),q(el,null,{default:a(()=>[ll,t(T,{class:"mt-2"},{default:a(()=>[t(i,{lg:"5",md:"5"},{default:a(()=>[t(S,{"no-body":"",class:Ce({"border-sale":F.value==1})},{default:a(()=>[t(b,{class:"text-center"},{default:a(()=>[tl,t(r,{class:"py-1"},{default:a(()=>[_("VENTA")]),_:1}),t(m,{name:"state_sale",onClick:l[0]||(l[0]=o=>F.value=1),value:"1",checked:""})]),_:1})]),_:1},8,["class"])]),_:1}),t(i,{lg:"2",md:"2"}),t(i,{lg:"5",md:"5"},{default:a(()=>[t(S,{"no-body":"",class:Ce({"border-sale":F.value==2})},{default:a(()=>[t(b,{class:"text-center"},{default:a(()=>[al,t(r,{class:"py-1"},{default:a(()=>[_("COTIZACI√ìN")]),_:1}),t(m,{name:"state_sale",onClick:l[1]||(l[1]=o=>F.value=2),value:"2"})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),t(S,{"no-body":""},{default:a(()=>[t(b,null,{default:a(()=>[t(r,null,{default:a(()=>[_("üî© Datos Generales")]),_:1})]),_:1}),t(ve,{class:"pt-0"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"2"},{default:a(()=>[ol,e("div",ul,[t(m,{name:"is_exportacion-c",onClick:l[2]||(l[2]=o=>A.value=0),value:"0",checked:A.value==0},{default:a(()=>[_("No")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"is_exportacion-c",class:"mx-2",onClick:l[3]||(l[3]=o=>A.value=1),value:"1",checked:A.value==1},{default:a(()=>[_("Si")]),_:1},8,["checked"]),_(" "+n(" "))])]),_:1}),t(i,{lg:"2",md:"3"},{default:a(()=>[nl,t(E,{type:"text",id:"n-transaction",modelValue:pe.value,"onUpdate:modelValue":l[4]||(l[4]=o=>pe.value=o),placeholder:"000000"},null,8,["modelValue"])]),_:1}),t(i,{lg:"2",md:"3"},{default:a(()=>[sl,t(E,{type:"date",id:"n-f-emision",modelValue:fe.value,"onUpdate:modelValue":l[5]||(l[5]=o=>fe.value=o)},null,8,["modelValue"])]),_:1}),t(i,{lg:"5",md:"5"},{default:a(()=>[dl,e("select",il,[cl,(c(!0),v(ue,null,oe(me.value,(o,g)=>(c(),v("option",{key:g,value:o.id},n(o.full_name),9,rl))),128))]),x.value?(c(),v("b",vl,n(x.value.type_client=="1"?"CLIENTE FINAL":"CLIENTE EMPRESA"),1)):p("",!0)]),_:1}),A.value==0?(c(),q(i,{key:0,lg:"5"},{default:a(()=>[_l,e("div",pl,[t(m,{name:"retencion-igv-c",onClick:l[6]||(l[6]=o=>V.value=0),value:"0",checked:V.value==0},{default:a(()=>[_("Ninguno")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"retencion-igv-c",class:"mx-2",onClick:l[7]||(l[7]=o=>V.value=1),value:"1",checked:V.value==1},{default:a(()=>[_("Retenci√≥n")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"retencion-igv-c",class:"mx-2",onClick:l[8]||(l[8]=o=>V.value=2),value:"2",checked:V.value==2},{default:a(()=>[_("Detracci√≥n")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"retencion-igv-c",class:"mx-2",onClick:l[9]||(l[9]=o=>V.value=3),value:"3",checked:V.value==3},{default:a(()=>[_("Percepci√≥n")]),_:1},8,["checked"])])]),_:1})):p("",!0),t(i,{lg:"2"},{default:a(()=>[fl,e("div",ml,[t(m,{name:"is_anticipo-c",onClick:l[10]||(l[10]=o=>H.value=0),value:"0",checked:H.value==0},{default:a(()=>[_("No")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"is_anticipo-c",class:"mx-2",onClick:l[11]||(l[11]=o=>H.value=1),value:"1",checked:H.value==1},{default:a(()=>[_("Si")]),_:1},8,["checked"]),_(" "+n(" "))])]),_:1}),H.value==1?(c(),q(i,{key:1,lg:"2"},{default:a(()=>[e("div",bl,[e("div",null,[gl,t(E,{type:"text",id:"n-of-comprobante",modelValue:J.value,"onUpdate:modelValue":l[12]||(l[12]=o=>J.value=o),onKeyup:l[13]||(l[13]=Te(o=>Ie(),["enter"])),placeholder:"",disabled:!!L.value},null,8,["modelValue","disabled"])]),L.value?(c(),v("div",yl,[t(G,{type:"button",class:"rounded-pill btn btn-info",onClick:l[14]||(l[14]=o=>Pe())},{default:a(()=>[hl]),_:1}),t(G,{type:"button",class:"rounded-pill btn btn-dark",onClick:l[15]||(l[15]=o=>Ve())},{default:a(()=>[kl]),_:1})])):p("",!0)]),M.value.length>0?(c(),v("div",xl,[e("table",null,[Nl,e("tbody",null,[(c(!0),v(ue,null,oe(M.value,(o,g)=>(c(),v("tr",{key:g},[e("td",null,n(o.n_operacion),1),e("td",null,[t(G,{type:"button",class:"rounded-pill btn btn-danger",onClick:P=>Ue(g)},{default:a(()=>[Vl]),_:2},1032,["onClick"])])]))),128))])])])):p("",!0)]),_:1})):p("",!0),t(i,{lg:"2"},{default:a(()=>[Cl,t(ae,{id:"FB",modelValue:ge.value,"onUpdate:modelValue":l[16]||(l[16]=o=>ge.value=o)},{default:a(()=>[Tl,El]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(S,{"no-body":""},{default:a(()=>[t(b,null,{default:a(()=>[t(r,null,{default:a(()=>[_("üì¶ Datos del Producto")]),_:1})]),_:1}),t(ve,{class:"pt-0"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"5",md:"5"},{default:a(()=>[e("div",Fl,[e("div",Al,[Il,e("select",Pl,[Ul,(c(!0),v(ue,null,oe(ne.value,(o,g)=>(c(),v("option",{key:g,value:o.id},n(o.title),9,Sl))),128))])]),d.value?(c(),v("div",$l,[d.value.is_icbper==2?(c(),v("span",Ol,"Es Bolsa de Plastico")):p("",!0),d.value.is_ivap==2?(c(),v("span",Dl,"Es Arroz Pilado")):p("",!0)])):p("",!0)])]),_:1}),t(i,{lg:"3",md:"3"},{default:a(()=>[t(T,null,{default:a(()=>{var o,g;return[d.value&&((o=d.value)==null?void 0:o.is_ivap)==1&&A.value==0?(c(),q(i,{key:0,lg:"12",md:"12"},{default:a(()=>[wl,t(ae,{id:"n-f-type-operation",modelValue:h.value,"onUpdate:modelValue":l[17]||(l[17]=P=>h.value=P)},{default:a(()=>[Rl,Bl,Gl,ql]),_:1},8,["modelValue"])]),_:1})):p("",!0),d.value&&A.value==1?(c(),q(i,{key:1,lg:"12",md:"12"},{default:a(()=>[Ll,t(ae,{id:"n-f-type-operation",modelValue:h.value,"onUpdate:modelValue":l[18]||(l[18]=P=>h.value=P)},{default:a(()=>[Ml]),_:1},8,["modelValue"])]),_:1})):p("",!0),d.value&&((g=d.value)==null?void 0:g.is_ivap)==2&&A.value==0?(c(),q(i,{key:2,lg:"12",md:"12"},{default:a(()=>[zl,t(ae,{id:"n-f-type-operation",modelValue:h.value,"onUpdate:modelValue":l[19]||(l[19]=P=>h.value=P)},{default:a(()=>[Hl]),_:1},8,["modelValue"])]),_:1})):p("",!0),d.value&&d.value.is_discount==2?(c(),q(i,{key:3,lg:"12",md:"12"},{default:a(()=>[Jl,t(E,{type:"number",id:"n-f-discount",modelValue:se.value,"onUpdate:modelValue":l[20]||(l[20]=P=>se.value=P),placeholder:"",disabled:Number(h.value)==11},null,8,["modelValue","disabled"])]),_:1})):p("",!0)]}),_:1})]),_:1}),t(i,{lg:"3",md:"3"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"12",md:"12"},{default:a(()=>[Kl,t(E,{type:"number",id:"n-f-cantidad",modelValue:U.value,"onUpdate:modelValue":l[21]||(l[21]=o=>U.value=o),placeholder:""},null,8,["modelValue"])]),_:1}),t(i,{lg:"12",md:"12"},{default:a(()=>[Yl,t(E,{type:"number",id:"n-f-precio-base",modelValue:N.value,"onUpdate:modelValue":l[22]||(l[22]=o=>N.value=o),placeholder:"",disabled:Number(h.value)==11},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),t(i,{lg:"1",md:"1"},{default:a(()=>[t(G,{type:"button",variant:"success",onClick:l[23]||(l[23]=o=>Se())},{default:a(()=>[jl]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,{"no-body":""},{default:a(()=>[t(b,null,{default:a(()=>[t(r,null,{default:a(()=>[_("üìí Detalle de la "+n(F.value==1?"Venta":"Cotizaci√≥n"),1)]),_:1})]),_:1}),t(ve,{class:"pt-0"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"12"},{default:a(()=>[e("div",Ql,[e("table",Zl,[Wl,e("tbody",null,[(c(!0),v(ue,null,oe(k.value,(o,g)=>(c(),v("tr",{key:g},[e("td",null,n(g+1),1),e("td",null,n(o.product.title),1),e("td",null,n(o.unidad_medida),1),e("td",null,n(o.quantity),1),e("td",null,n(f.value)+" "+n(o.price_base),1),e("td",null,n(f.value)+" "+n((o.igv+o.icbper).toFixed(2)),1),e("td",null,n(f.value)+" "+n(o.discount),1),e("td",null,n(f.value)+" "+n(o.price_final),1),[11].includes(Number(o.tip_afe_igv))?p("",!0):(c(),v("td",Xl,n(f.value)+" "+n(o.subtotal),1)),[11].includes(Number(o.tip_afe_igv))?(c(),v("td",et,n(f.value)+" 0 ",1)):p("",!0),e("td",null,[t(G,{type:"button",variant:"danger",onClick:P=>Oe(g)},{default:a(()=>[lt]),_:2},1032,["onClick"])])]))),128))])])])]),_:1}),t(i,{lg:"6"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"4"},{default:a(()=>[tt,t(E,{type:"number",id:"n-discount-global",modelValue:$.value,"onUpdate:modelValue":l[24]||(l[24]=o=>$.value=o),onKeyup:l[25]||(l[25]=Te(o=>I(),["enter"])),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(i,{lg:"6",class:"mt-2"},{default:a(()=>[e("table",at,[e("tr",null,[ot,e("td",null,n(f.value)+" "+n(De()),1)]),e("tr",null,[ut,e("td",null,n(f.value)+" "+n(we()),1)]),e("tr",null,[nt,e("td",null,n(f.value)+" "+n(B()),1)]),Z.value>0?(c(),v("tr",st,[dt,e("td",null,n(f.value)+" "+n(Z.value),1)])):p("",!0),W.value>0?(c(),v("tr",it,[ct,e("td",null,n(f.value)+" "+n(W.value),1)])):p("",!0),X.value>0?(c(),v("tr",rt,[vt,e("td",null,n(f.value)+" "+n(X.value),1)])):p("",!0),R.value>0?(c(),v("tr",_t,[pt,e("td",null,n(f.value)+" "+n(R.value+ee.value),1)])):p("",!0),he.value>0?(c(),v("tr",ft,[mt,e("td",null,n(f.value)+" "+n(he.value),1)])):p("",!0),ce.value>0?(c(),v("tr",bt,[gt,e("td",null,n(f.value)+" "+n(ce.value),1)])):p("",!0),re.value>0?(c(),v("tr",yt,[ht,e("td",null,n(f.value)+" "+n(re.value),1)])):p("",!0),e("tr",null,[kt,e("td",null,n(f.value)+" "+n(de.value+$.value),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),t(S,{"no-body":""},{default:a(()=>[t(b,null,{default:a(()=>[t(r,null,{default:a(()=>[_("üíµ Pagos")]),_:1})]),_:1}),t(ve,{class:"pt-0"},{default:a(()=>[t(T,null,{default:a(()=>[t(i,{lg:"3"},{default:a(()=>[xt,e("div",Nt,[t(m,{name:"type-pay-c",onClick:l[26]||(l[26]=o=>C.value=1),value:"1",checked:C.value==1},{default:a(()=>[_("Al contado")]),_:1},8,["checked"]),_(" "+n(" ")+" "),t(m,{name:"type-pay-c",class:"mx-2",onClick:l[27]||(l[27]=o=>C.value=2),value:"2",checked:C.value==2},{default:a(()=>[_("Credito")]),_:1},8,["checked"])])]),_:1}),t(i,{lg:"3"},{default:a(()=>[Vt,t(ae,{id:"n-f-method-payment",modelValue:Y.value,"onUpdate:modelValue":l[28]||(l[28]=o=>Y.value=o)},{default:a(()=>[Ct,Tt,Et,Ft,At]),_:1},8,["modelValue"])]),_:1}),t(i,{lg:"2"},{default:a(()=>[It,t(E,{type:"number",id:"n-f-amount",modelValue:O.value,"onUpdate:modelValue":l[29]||(l[29]=o=>O.value=o),placeholder:""},null,8,["modelValue"])]),_:1}),C.value==2?(c(),q(i,{key:0,lg:"3"},{default:a(()=>[Pt,t(E,{type:"date",id:"n-f-payment",modelValue:K.value,"onUpdate:modelValue":l[30]||(l[30]=o=>K.value=o)},null,8,["modelValue"])]),_:1})):p("",!0),t(i,{lg:"1"},{default:a(()=>[Ut,t(G,{type:"button",variant:"primary",onClick:l[31]||(l[31]=o=>Re())},{default:a(()=>[St]),_:1})]),_:1})]),_:1}),t(T,{class:"mt-2"},{default:a(()=>[t(i,{lg:"6"},{default:a(()=>[e("div",$t,[e("table",Ot,[e("thead",Dt,[e("tr",null,[wt,Rt,Bt,C.value==2?(c(),v("th",Gt,"Fecha de Pago")):p("",!0),qt])]),e("tbody",null,[(c(!0),v(ue,null,oe(D.value,(o,g)=>(c(),v("tr",{key:g},[e("td",null,n(g+1),1),e("td",null,n(o.method_payment),1),e("td",null,n(f.value)+" "+n(o.amount),1),C.value==2?(c(),v("td",Lt,n(o.date_payment),1)):p("",!0),e("td",null,[t(G,{type:"button",variant:"danger",onClick:P=>Be(g)},{default:a(()=>[Mt]),_:2},1032,["onClick"])])]))),128))])])])]),_:1}),t(i,{lg:"3",md:"3"},{default:a(()=>[zt,t(Ge,{type:"textarea",modelValue:ie.value,"onUpdate:modelValue":l[32]||(l[32]=o=>ie.value=o),rows:"5",id:"description-product"},null,8,["modelValue"])]),_:1}),t(i,{lg:"3",md:"3",class:"text-end"},{default:a(()=>[t(G,{type:"button",variant:"primary",onClick:l[33]||(l[33]=o=>Fe())},{default:a(()=>[Ht,_(" Guardar "+n(F.value==1?"Venta":"Cotizaci√≥n"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Xt as default};
